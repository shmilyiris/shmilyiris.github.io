<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="patA级刷题，7.23-8.24">
<meta property="og:type" content="article">
<meta property="og:title" content="PAT日记IV">
<meta property="og:url" content="http://yoursite.com/2021/07/23/PAT%E6%97%A5%E8%AE%B0IV/index.html">
<meta property="og:site_name" content="今天你Coding了吗?">
<meta property="og:description" content="patA级刷题，7.23-8.24">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-07-23T14:08:08.000Z">
<meta property="article:modified_time" content="2021-09-10T11:02:07.600Z">
<meta property="article:author" content="Michael Johnson">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2021/07/23/PAT%E6%97%A5%E8%AE%B0IV/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>PAT日记IV | 今天你Coding了吗?</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">今天你Coding了吗?</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/07/23/PAT%E6%97%A5%E8%AE%B0IV/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%A8%8B%E5%BA%8F%E7%8C%BF.jpg">
      <meta itemprop="name" content="Michael Johnson">
      <meta itemprop="description" content="小白的个人网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="今天你Coding了吗?">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          PAT日记IV
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-23 22:08:08" itemprop="dateCreated datePublished" datetime="2021-07-23T22:08:08+08:00">2021-07-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-10 19:02:07" itemprop="dateModified" datetime="2021-09-10T19:02:07+08:00">2021-09-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">算法题目</span></a>
                </span>
            </span>

          
            <span id="/2021/07/23/PAT%E6%97%A5%E8%AE%B0IV/" class="post-meta-item leancloud_visitors" data-flag-title="PAT日记IV" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/07/23/PAT%E6%97%A5%E8%AE%B0IV/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/07/23/PAT%E6%97%A5%E8%AE%B0IV/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>patA级刷题，7.23-8.24</p>
<a id="more"></a>

<h1 id="1056-Mice-and-Rice"><a href="#1056-Mice-and-Rice" class="headerlink" title="1056 Mice and Rice"></a>1056 Mice and Rice</h1><h2 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h2><p>将n个老鼠每m个分为一组比较重量，不足m个的也单分为一组，每一组选出一个最重的老鼠进入下一轮，以此类推，最终得出老鼠的排名。</p>
<h2 id="第一次提交"><a href="#第一次提交" class="headerlink" title="第一次提交"></a>第一次提交</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; weight, rk;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, order;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    weight.resize(n);</span><br><span class="line">    rk.assign(n, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q; <span class="comment">// 体重队列</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">cin</span> &gt;&gt; weight[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; order;</span><br><span class="line">        q.push(order);</span><br><span class="line">    &#125;</span><br><span class="line">    q.push(<span class="number">-1</span>);</span><br><span class="line">    <span class="comment">// 到现在，q存储了按顺序排列的programmers们的idx</span></span><br><span class="line">    <span class="keyword">int</span> group;</span><br><span class="line">    <span class="keyword">while</span> (q.<span class="built_in">size</span>() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> maxidx = <span class="number">-1</span>, maxweight = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">bool</span> label = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (q.back() == <span class="number">-1</span>) &#123;</span><br><span class="line">            group = (q.<span class="built_in">size</span>() - <span class="number">1</span> + m - <span class="number">1</span>) / m ; <span class="comment">// 向上取整求得组数</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (cnt &lt;= m) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            rk[tmp] = group + <span class="number">1</span>; <span class="comment">// 对本轮的参赛者进行标记</span></span><br><span class="line">            <span class="keyword">if</span> (weight[tmp] &gt; maxweight) &#123;</span><br><span class="line">                maxidx = tmp;</span><br><span class="line">                maxweight = weight[tmp];</span><br><span class="line">            &#125;</span><br><span class="line">            cnt++;</span><br><span class="line">            <span class="keyword">if</span> (q.front() == <span class="number">-1</span>) &#123;</span><br><span class="line">                label = <span class="literal">true</span>;</span><br><span class="line">                q.pop();</span><br><span class="line">                <span class="keyword">break</span>; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        q.push(maxidx); <span class="comment">// 将赢家纳入下一轮</span></span><br><span class="line">        rk[maxidx] = <span class="number">1</span>; <span class="comment">// 赢家的排名更新回默认第一名</span></span><br><span class="line">        <span class="keyword">if</span> (label) &#123;</span><br><span class="line">            q.push(<span class="number">-1</span>); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d%s"</span>, rk[i], (i == n - <span class="number">1</span>) ? <span class="string">"\n"</span> : <span class="string">" "</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="第二次提交"><a href="#第二次提交" class="headerlink" title="第二次提交"></a>第二次提交</h2><p>个人感觉，这种设置-1为边界的方法贼蠢，借鉴了一下<a href="https://www.cnblogs.com/caiyishuai/p/11556858.html" target="_blank" rel="noopener">这位大神的blog</a>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q,p;</span><br><span class="line"><span class="keyword">int</span> n,m,x;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">1005</span>];</span><br><span class="line"><span class="keyword">int</span> r[<span class="number">1005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line">        q.push(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">int</span> l=<span class="keyword">int</span>(<span class="built_in">ceil</span>(q.<span class="built_in">size</span>()*<span class="number">1.0</span>/m));<span class="comment">//向上取整</span></span><br><span class="line">        <span class="keyword">while</span>(!q.empty())&#123;            </span><br><span class="line">            <span class="keyword">int</span> mx=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> k=<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;<span class="comment">//每m各一组</span></span><br><span class="line">                <span class="keyword">if</span>(!q.empty())&#123;</span><br><span class="line">                    x=q.front();</span><br><span class="line">                    q.pop();</span><br><span class="line">                    r[x]=l+<span class="number">1</span>;<span class="comment">//rank为组数+1</span></span><br><span class="line">                    <span class="keyword">if</span>(a[x]&gt;mx)&#123;</span><br><span class="line">                        mx=a[x];</span><br><span class="line">                        k=x;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            p.push(k);<span class="comment">//胜利者放入p</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(p.<span class="built_in">size</span>()!=<span class="number">1</span>)&#123;</span><br><span class="line">            q=p;</span><br><span class="line">            <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;empty;</span><br><span class="line">            swap(p,empty);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            r[p.front()]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;r[i];</span><br><span class="line">        <span class="keyword">if</span>(i!=n<span class="number">-1</span>) <span class="built_in">cout</span>&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这位大哥用两个队列分别标志胜利者和竞赛者，关系清晰多了，完全不用-1当分界线。有的时候何必为难自己呢。</p>
<h1 id="1057-Stack"><a href="#1057-Stack" class="headerlink" title="1057 Stack"></a>1057 Stack</h1><h2 id="题目大意-1"><a href="#题目大意-1" class="headerlink" title="题目大意"></a>题目大意</h2><p>针对如下命令，输出对应内容：</p>
<ul>
<li><code>Push x</code>，将x进栈</li>
<li><code>Pop x</code>，将x出栈，并输出</li>
<li><code>PeekMedian</code>，从stack中找出中位数输出</li>
</ul>
<h2 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h2><p>维护一个栈来计算当前栈内的数量，维护一个树状数组<code>value : cnt</code>，并通过二分法在[1, maxN]区间下通过getsum得到<strong>不大于mid的数的数量</strong>，从而不断将mid逼近中位数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(i) ((i) &amp; (-i))</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> c[maxN];</span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = x; i &lt; maxN; i += lowbit(i))</span><br><span class="line">        c[i] += v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getsum</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = x; i &gt;= <span class="number">1</span>; i -= lowbit(i))</span><br><span class="line">        sum += c[i];</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PeekMedian</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">1</span>, right = maxN, k = (s.<span class="built_in">size</span>() + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (getsum(mid) &gt;= k) right = mid;</span><br><span class="line">        <span class="keyword">else</span> left = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, left);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d\n"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">15</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, str);</span><br><span class="line">        <span class="keyword">if</span> (str[<span class="number">1</span>] == <span class="string">'u'</span>) &#123;</span><br><span class="line">            <span class="comment">// Push</span></span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;temp);</span><br><span class="line">            s.push(temp);</span><br><span class="line">            update(temp, <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str[<span class="number">1</span>] == <span class="string">'o'</span>) &#123;</span><br><span class="line">            <span class="comment">// Pop</span></span><br><span class="line">            <span class="keyword">if</span> (!s.empty()) &#123;</span><br><span class="line">                update(s.top(), <span class="number">-1</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, s.top());</span><br><span class="line">                s.pop();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Invalid\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!s.empty()) PeekMedian();</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"Invalid\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1059-Prime-Factors"><a href="#1059-Prime-Factors" class="headerlink" title="1059 Prime Factors"></a>1059 Prime Factors</h1><h2 id="题目大意-2"><a href="#题目大意-2" class="headerlink" title="题目大意"></a>题目大意</h2><p>对给定的longint数据进行质因数分解（可以整除多次的要转换成幂的形式）</p>
<p>例如：<code>252=2^2*3^2*7</code></p>
<h2 id="构建质数表"><a href="#构建质数表" class="headerlink" title="构建质数表"></a>构建质数表</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">is_prime</span><span class="params">(<span class="number">50000</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 构建素数表</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i * i &lt; <span class="number">50000</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j * j &lt; <span class="number">50000</span>; ++j) &#123;</span><br><span class="line">            is_prime[i * j] = <span class="number">0</span>; <span class="comment">// 将非素数置为0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">int</span> a;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%ld="</span>, a);</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">"1"</span>);</span><br><span class="line">    <span class="keyword">bool</span> state = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> factor = <span class="number">2</span>; factor &lt; <span class="number">50000</span> &amp;&amp; a &gt;= <span class="number">2</span>; ++factor) &#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (is_prime[factor] == <span class="number">1</span> &amp;&amp; a % factor == <span class="number">0</span>) &#123;</span><br><span class="line">            cnt ++;</span><br><span class="line">            a /= factor;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cnt) &#123;</span><br><span class="line">            <span class="comment">// 如果当前因子参与了运算，则要输出</span></span><br><span class="line">            <span class="keyword">if</span> (state) <span class="built_in">printf</span>(<span class="string">"*"</span>);</span><br><span class="line">            <span class="keyword">if</span> (cnt == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d"</span>, factor);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d^%d"</span>, factor, cnt);</span><br><span class="line">            &#125;</span><br><span class="line">            state = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="1075-PAT-Judge"><a href="#1075-PAT-Judge" class="headerlink" title="1075 PAT Judge"></a>1075 PAT Judge</h1><p>大排序模拟</p>
<h2 id="第一次提交-1"><a href="#第一次提交-1" class="headerlink" title="第一次提交"></a>第一次提交</h2><p>4/5</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k, m;</span><br><span class="line"><span class="keyword">int</span> a, b, c;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">people</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> id = <span class="number">-1</span>, rk = <span class="number">-1</span>, perfects = <span class="number">0</span>, no_passes = k, total_score = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> scores[<span class="number">6</span>] = &#123;<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> perfect[<span class="number">6</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> passed[<span class="number">6</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;; <span class="comment">// 编译成功的标记</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(people* p1, people* p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p1-&gt;total_score != p2-&gt;total_score) &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;total_score &gt; p2-&gt;total_score;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p1-&gt;perfects != p2-&gt;perfects) &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;perfects &gt; p2-&gt;perfects;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;id &lt; p2-&gt;id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. 如果所有问题均未编译通过，不予显示</span></span><br><span class="line"><span class="comment">2. 相同排名的第二标尺是完美解决的问题个数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">vector</span>&lt;people*&gt; lis;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;n, &amp;k, &amp;m);</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">full_score</span><span class="params">(k + <span class="number">1</span>)</span></span>;</span><br><span class="line">    lis.resize(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) lis[i] = <span class="keyword">new</span> people;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;full_score[i]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> qa = <span class="number">0</span>; qa &lt; m; ++qa) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        a -= <span class="number">1</span>; <span class="comment">// 对应下标</span></span><br><span class="line">        <span class="keyword">if</span> (lis[a]-&gt;id == <span class="number">-1</span>) &#123;</span><br><span class="line">            lis[a]-&gt;id = a + <span class="number">1</span>;</span><br><span class="line">            lis[a]-&gt;no_passes = k;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (c == full_score[b]) lis[a]-&gt;perfect[b] = <span class="number">1</span>;  <span class="comment">// 完美解决次数+1</span></span><br><span class="line">        <span class="keyword">if</span> (c != <span class="number">-1</span>) lis[a]-&gt;passed[b] = <span class="number">1</span>;  <span class="comment">// 编译成功标记</span></span><br><span class="line">        <span class="keyword">else</span> lis[a]-&gt;scores[b] = <span class="number">0</span>; <span class="comment">// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></span><br><span class="line">        lis[a]-&gt;scores[b] = <span class="built_in">max</span>(c, lis[a]-&gt;scores[b]);  <span class="comment">// 取最好提交成绩</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="comment">// 计算total_score, perfects, no_passes</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">            lis[i]-&gt;total_score += ((lis[i]-&gt;scores[j] == <span class="number">-1</span>) ? <span class="number">0</span> : lis[i]-&gt;scores[j]);</span><br><span class="line">            lis[i]-&gt;perfects += lis[i]-&gt;perfect[j];</span><br><span class="line">            lis[i]-&gt;no_passes -= lis[i]-&gt;passed[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(lis.<span class="built_in">begin</span>(), lis.<span class="built_in">end</span>(), cmp);</span><br><span class="line">    </span><br><span class="line">    lis[<span class="number">0</span>]-&gt;rk = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="comment">// 计算rank</span></span><br><span class="line">        <span class="keyword">if</span> (lis[i]-&gt;total_score == lis[i - <span class="number">1</span>]-&gt;total_score) &#123;</span><br><span class="line">            lis[i]-&gt;rk = lis[i - <span class="number">1</span>]-&gt;rk;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            lis[i]-&gt;rk = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 输出</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (lis[i]-&gt;no_passes == k) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %05d %d"</span>, lis[i]-&gt;rk, lis[i]-&gt;id, lis[i]-&gt;total_score);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lis[i]-&gt;scores[j] != <span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">" %d"</span>, lis[i]-&gt;scores[j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">" -"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>错误原因是：若一个人的某道题成功提交，再提交一次编译不通过会导致该分实际为0，总分算错。</p>
<h2 id="第二次提交-1"><a href="#第二次提交-1" class="headerlink" title="第二次提交"></a>第二次提交</h2><p>将上部分代码的叹号标记改为</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (lis[a]-&gt;scores[b] == <span class="number">-1</span>) lis[a]-&gt;scores[b] = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>



<h1 id="1080-Graduate-Admission"><a href="#1080-Graduate-Admission" class="headerlink" title="1080 Graduate Admission"></a>1080 Graduate Admission</h1><h2 id="第一次提交-2"><a href="#第一次提交-2" class="headerlink" title="第一次提交"></a>第一次提交</h2><p>错误版本：误以为志愿优先，实际上是学生优先。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">people</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> choices[<span class="number">6</span>];</span><br><span class="line">    <span class="keyword">int</span> rank = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">int</span> GE, GI;</span><br><span class="line">    <span class="keyword">float</span> G;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;people*&gt; rank_list;</span><br><span class="line"><span class="keyword">int</span> quota[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(people *p1, people *p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p1-&gt;G != p2-&gt;G) &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;G &gt; p2-&gt;G;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;GE &gt; p2-&gt;GE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    rank_list.resize(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;quota[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        rank_list[i] = <span class="keyword">new</span> people;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;rank_list[i]-&gt;GE, &amp;rank_list[i]-&gt;GI);</span><br><span class="line">        rank_list[i]-&gt;id = i;</span><br><span class="line">        rank_list[i]-&gt;G = (<span class="keyword">float</span>)(rank_list[i]-&gt;GE + rank_list[i]-&gt;GI) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; ++j) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;rank_list[i]-&gt;choices[j]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    sort(rank_list.<span class="built_in">begin</span>(), rank_list.<span class="built_in">end</span>(), cmp);</span><br><span class="line">    <span class="comment">// 标定rank</span></span><br><span class="line">    rank_list[<span class="number">0</span>]-&gt;rank = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (rank_list[i]-&gt;G == rank_list[i - <span class="number">1</span>]-&gt;G &amp;&amp; rank_list[i]-&gt;GE == rank_list[i - <span class="number">1</span>]-&gt;GE) &#123;</span><br><span class="line">            rank_list[i]-&gt;rank = rank_list[i - <span class="number">1</span>]-&gt;rank;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            rank_list[i]-&gt;rank = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="title">ans</span><span class="params">(m)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">vis</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="comment">// 从第一志愿向后逐一进行讨论</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">        <span class="comment">// 按照rank_list从前向后进行优先选择</span></span><br><span class="line">        <span class="comment">// 注意当筛选到同排名同志愿的学生，只要当前仍有至少一个名额且该学生并未被录取，这些学生都会被录取</span></span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="title">admit_rank</span><span class="params">(m)</span></span>; <span class="comment">// admit_rank[i]数组代表本志愿目前录取的人的rank的集合</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] == <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> cur_rank = rank_list[j]-&gt;rank, cur_choice = rank_list[j]-&gt;choices[i], cur_id = rank_list[j]-&gt;id;</span><br><span class="line">            <span class="keyword">if</span> (quota[cur_choice] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 还有名额，果断录取</span></span><br><span class="line">                quota[cur_choice]--;</span><br><span class="line">                admit_rank[cur_choice].push_back(cur_rank);</span><br><span class="line">                ans[cur_choice].push_back(cur_id);</span><br><span class="line">                vis[j] = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 如果admit_rank[cur_choice]中有同名次选手，同样可以入选</span></span><br><span class="line">                <span class="comment">// 从admit_rank[cur_choice]数组从后往前递推，tmp=quota[cur_choice]并逐渐递增</span></span><br><span class="line">                <span class="comment">// 直到递推到的rank大于cur_rank，中间若存在tmp==0,rank==cur_rank，则可以入校</span></span><br><span class="line">                <span class="keyword">if</span> (admit_rank[cur_choice].<span class="built_in">size</span>() == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> tmp = quota[cur_choice];</span><br><span class="line">                <span class="keyword">int</span> idx = admit_rank[cur_choice].<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> (idx &gt;= <span class="number">0</span> &amp;&amp; admit_rank[cur_choice][idx] == cur_rank) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tmp == <span class="number">0</span>) &#123;</span><br><span class="line">                        quota[cur_choice]--;</span><br><span class="line">                        admit_rank[cur_choice].push_back(cur_rank);</span><br><span class="line">                        ans[cur_choice].push_back(cur_id);</span><br><span class="line">                        vis[j] = <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    idx--;</span><br><span class="line">                    tmp++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印结果</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; ans[i].<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, ans[i][j]);</span><br><span class="line">            <span class="keyword">if</span> (j != ans[i].<span class="built_in">size</span>() - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="第二次提交-2"><a href="#第二次提交-2" class="headerlink" title="第二次提交"></a>第二次提交</h2><p>测试点4超时</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">people</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> choices[<span class="number">6</span>];</span><br><span class="line">    <span class="keyword">int</span> rank = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">int</span> GE, GI;</span><br><span class="line">    <span class="keyword">float</span> G;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;people*&gt; rank_list;</span><br><span class="line"><span class="keyword">int</span> quota[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(people *p1, people *p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p1-&gt;G != p2-&gt;G) &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;G &gt; p2-&gt;G;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;GE &gt; p2-&gt;GE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    rank_list.resize(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;quota[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        rank_list[i] = <span class="keyword">new</span> people;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;rank_list[i]-&gt;GE, &amp;rank_list[i]-&gt;GI);</span><br><span class="line">        rank_list[i]-&gt;id = i;</span><br><span class="line">        rank_list[i]-&gt;G = (<span class="keyword">float</span>)(rank_list[i]-&gt;GE + rank_list[i]-&gt;GI) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; ++j) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;rank_list[i]-&gt;choices[j]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    sort(rank_list.<span class="built_in">begin</span>(), rank_list.<span class="built_in">end</span>(), cmp);</span><br><span class="line">    <span class="comment">// 标定rank</span></span><br><span class="line">    rank_list[<span class="number">0</span>]-&gt;rank = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (rank_list[i]-&gt;G == rank_list[i - <span class="number">1</span>]-&gt;G &amp;&amp; rank_list[i]-&gt;GE == rank_list[i - <span class="number">1</span>]-&gt;GE) &#123;</span><br><span class="line">            rank_list[i]-&gt;rank = rank_list[i - <span class="number">1</span>]-&gt;rank;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            rank_list[i]-&gt;rank = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="title">ans</span><span class="params">(m)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="title">ans_rank</span><span class="params">(m)</span></span>; <span class="comment">// 学校接收学生的rank列表</span></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">vis</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="comment">// 从第一学生向后逐一进行讨论</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">bool</span> admit = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; ++j) &#123;</span><br><span class="line">            <span class="comment">// 遍历该学生的选择</span></span><br><span class="line">            <span class="keyword">int</span> cur_choice = rank_list[i]-&gt;choices[j];</span><br><span class="line">            <span class="keyword">int</span> cur_rank = rank_list[i]-&gt;rank;</span><br><span class="line">            <span class="keyword">int</span> cur_id = rank_list[i]-&gt;id;</span><br><span class="line">            <span class="keyword">if</span> (quota[cur_choice] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                quota[cur_choice]--;</span><br><span class="line">                ans_rank[cur_choice].push_back(cur_rank);</span><br><span class="line">                ans[cur_choice].push_back(cur_id);</span><br><span class="line">                admit = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> <span class="built_in">size</span> = ans_rank[cur_choice].<span class="built_in">size</span>();</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> tmp = quota[cur_choice];</span><br><span class="line">                <span class="keyword">int</span> idx = <span class="built_in">size</span> - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> (idx &gt;= <span class="number">0</span> &amp;&amp; ans_rank[cur_choice][idx] == cur_rank) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tmp == <span class="number">0</span>) &#123;</span><br><span class="line">                        quota[cur_choice]--;</span><br><span class="line">                        ans_rank[cur_choice].push_back(cur_rank);</span><br><span class="line">                        ans[cur_choice].push_back(cur_id);</span><br><span class="line">                        admit = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    idx--; tmp++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (admit) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 排序ans</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) sort(ans[i].<span class="built_in">begin</span>(), ans[i].<span class="built_in">end</span>(), [](<span class="keyword">int</span> a, <span class="keyword">int</span> b)&#123;<span class="keyword">return</span> a &lt; b;&#125;);</span><br><span class="line">    <span class="comment">// 打印结果</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; ans[i].<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, ans[i][j]);</span><br><span class="line">            <span class="keyword">if</span> (j != ans[i].<span class="built_in">size</span>() - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="第三次提交"><a href="#第三次提交" class="headerlink" title="第三次提交"></a>第三次提交</h2><p>逻辑简化：该学生被学校录取只需满足<code>(该学校没招满 || 与该学校所招最后一位同学的排名相同)</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">people</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> choices[<span class="number">6</span>];</span><br><span class="line">    <span class="keyword">int</span> rank = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">int</span> GE, GI;</span><br><span class="line">    <span class="keyword">float</span> G;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;people*&gt; rank_list;</span><br><span class="line"><span class="keyword">int</span> quota[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(people *p1, people *p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p1-&gt;G != p2-&gt;G) &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;G &gt; p2-&gt;G;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> p1-&gt;GE &gt; p2-&gt;GE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    rank_list.resize(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;quota[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        rank_list[i] = <span class="keyword">new</span> people;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;rank_list[i]-&gt;GE, &amp;rank_list[i]-&gt;GI);</span><br><span class="line">        rank_list[i]-&gt;id = i;</span><br><span class="line">        rank_list[i]-&gt;G = (<span class="keyword">float</span>)(rank_list[i]-&gt;GE + rank_list[i]-&gt;GI) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; ++j) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;rank_list[i]-&gt;choices[j]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    sort(rank_list.<span class="built_in">begin</span>(), rank_list.<span class="built_in">end</span>(), cmp);</span><br><span class="line">    <span class="comment">// 标定rank</span></span><br><span class="line">    rank_list[<span class="number">0</span>]-&gt;rank = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (rank_list[i]-&gt;G == rank_list[i - <span class="number">1</span>]-&gt;G &amp;&amp; rank_list[i]-&gt;GE == rank_list[i - <span class="number">1</span>]-&gt;GE) &#123;</span><br><span class="line">            rank_list[i]-&gt;rank = rank_list[i - <span class="number">1</span>]-&gt;rank;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            rank_list[i]-&gt;rank = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="title">ans</span><span class="params">(m)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="title">ans_rank</span><span class="params">(m)</span></span>; <span class="comment">// 学校接收学生的rank列表</span></span><br><span class="line">    <span class="comment">// 从第一学生向后逐一进行讨论</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; ++j) &#123;</span><br><span class="line">            <span class="comment">// 遍历该学生的选择</span></span><br><span class="line">            <span class="keyword">int</span> cur_choice = rank_list[i]-&gt;choices[j];</span><br><span class="line">            <span class="keyword">int</span> cur_rank = rank_list[i]-&gt;rank;</span><br><span class="line">            <span class="keyword">int</span> cur_id = rank_list[i]-&gt;id;</span><br><span class="line">            <span class="keyword">if</span> (quota[cur_choice] &gt; <span class="number">0</span> || ans_rank[cur_choice].back() == cur_rank) &#123;</span><br><span class="line">                quota[cur_choice]--;</span><br><span class="line">                ans_rank[cur_choice].push_back(cur_rank);</span><br><span class="line">                ans[cur_choice].push_back(cur_id);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 打印结果</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        sort(ans[i].<span class="built_in">begin</span>(), ans[i].<span class="built_in">end</span>(), [](<span class="keyword">int</span> a, <span class="keyword">int</span> b)&#123;<span class="keyword">return</span> a &lt; b;&#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; ans[i].<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, ans[i][j]);</span><br><span class="line">            <span class="keyword">if</span> (j != ans[i].<span class="built_in">size</span>() - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="1030-Travel-Plan"><a href="#1030-Travel-Plan" class="headerlink" title="1030 Travel Plan"></a>1030 Travel Plan</h1><h2 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dist[<span class="number">505</span>][<span class="number">505</span>];</span><br><span class="line"><span class="keyword">int</span> cost[<span class="number">505</span>][<span class="number">505</span>];</span><br><span class="line"><span class="keyword">int</span> sumDis = <span class="number">1e10</span>, sumCst = <span class="number">1e10</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">copy</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;arr)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ret;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">size</span>(); ++i) ret.push_back(arr[i]);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur, <span class="keyword">int</span> <span class="built_in">end</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;path, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;vis, <span class="keyword">int</span> curDis, <span class="keyword">int</span> curCst)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cur == <span class="built_in">end</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (curDis &lt; sumDis || (curDis == sumDis &amp;&amp; curCst &lt; sumCst)) &#123;</span><br><span class="line">            ans = copy(path);</span><br><span class="line">            sumDis = curDis;</span><br><span class="line">            sumCst = curCst;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dist[cur][i] != <span class="number">0</span> &amp;&amp; vis[i] == <span class="number">0</span>) &#123;</span><br><span class="line">            path.push_back(i);</span><br><span class="line">            vis[i] = <span class="number">1</span>;</span><br><span class="line">            dfs(i, <span class="built_in">end</span>, path, vis, curDis + dist[cur][i], curCst + cost[cur][i]);</span><br><span class="line">            vis[i] = <span class="number">0</span>;</span><br><span class="line">            path.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m, start, <span class="built_in">end</span>, u, v, d, c;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; start &gt;&gt; <span class="built_in">end</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>, &amp;u, &amp;v, &amp;d, &amp;c);</span><br><span class="line">        dist[u][v] = d;</span><br><span class="line">        dist[v][u] = d;</span><br><span class="line">        cost[u][v] = c;</span><br><span class="line">        cost[v][u] = c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">vis</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">    vis[start] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path = &#123;start&#125;;</span><br><span class="line">    dfs(start, <span class="built_in">end</span>, path, vis, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.<span class="built_in">size</span>(); ++i) <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, sumDis, sumCst);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><p>Dijkstra双标尺+dfs输出路径</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">505</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> dis[maxN], COST[maxN], vis[maxN], graph[maxN][maxN], cost[maxN][maxN], pre[maxN];</span><br><span class="line"><span class="keyword">int</span> n, m, s, d;</span><br><span class="line"><span class="keyword">int</span> u, v, D, C;</span><br><span class="line"><span class="keyword">int</span> ansDis = <span class="number">0</span>, ansCost = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfsPrint</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i == s) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, s);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ansDis += graph[pre[i]][i];</span><br><span class="line">    ansCost += cost[pre[i]][i];</span><br><span class="line">    dfsPrint(pre[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; s &gt;&gt; d;</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dis);</span><br><span class="line">    <span class="built_in">memset</span>(COST, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> COST);</span><br><span class="line">    <span class="built_in">memset</span>(graph, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> graph);</span><br><span class="line">    <span class="built_in">memset</span>(cost, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> cost);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;u, &amp;v, &amp;D, &amp;C);</span><br><span class="line">        graph[u][v] = D;</span><br><span class="line">        graph[v][u] = D;</span><br><span class="line">        cost[u][v] = C;</span><br><span class="line">        cost[v][u] = C;</span><br><span class="line">    &#125;</span><br><span class="line">    dis[s] = <span class="number">0</span>;</span><br><span class="line">    COST[s] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) pre[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> minDis = INF, idx = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] == <span class="number">0</span> &amp;&amp; minDis &gt; dis[j]) &#123;</span><br><span class="line">                minDis = dis[j];</span><br><span class="line">                idx = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (minDis == INF) <span class="keyword">break</span>;</span><br><span class="line">        vis[idx] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] == <span class="number">0</span> &amp;&amp; graph[idx][j] != INF) &#123;</span><br><span class="line">                <span class="keyword">if</span> (dis[idx] + graph[idx][j] &lt; dis[j]) &#123;</span><br><span class="line">                    dis[j] = dis[idx] + graph[idx][j];</span><br><span class="line">                    COST[j] = COST[idx] + cost[idx][j];</span><br><span class="line">                    pre[j] = idx;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dis[idx] + graph[idx][j] == dis[j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (COST[idx] + cost[idx][j] &lt; COST[j]) &#123;</span><br><span class="line">                        COST[j] = COST[idx] + cost[idx][j];</span><br><span class="line">                        pre[j] = idx;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    dfsPrint(d);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ansDis &lt;&lt; <span class="string">" "</span> &lt;&lt; ansCost &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1095-Cars-on-Campus"><a href="#1095-Cars-on-Campus" class="headerlink" title="1095 Cars on Campus"></a>1095 Cars on Campus</h1><h2 id="第一次提交-3"><a href="#第一次提交-3" class="headerlink" title="第一次提交"></a>第一次提交</h2><p>答案错误，原因是没有读出题目的变态条件。即车辆多次进入未出，要取最后一次进入的时间作为进入的时间，车辆多次出未进，要取第一次出去的时间作为出去的时间。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">INF</span> &#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; in_out; <span class="comment">// the in and out time of that car</span></span><br><span class="line">    <span class="keyword">int</span> during = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">time2int</span><span class="params">(<span class="keyword">int</span> hh, <span class="keyword">int</span> mm, <span class="keyword">int</span> ss)</span> </span>&#123;<span class="keyword">return</span> hh * <span class="number">60</span> * <span class="number">60</span> + mm * <span class="number">60</span> + ss;&#125;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">int2time</span><span class="params">(<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ret;</span><br><span class="line">    <span class="keyword">while</span> (r) &#123;</span><br><span class="line">        ret.push_back(r % <span class="number">60</span>);</span><br><span class="line">        r /= <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n, m, hh, mm, ss;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; str2id; <span class="comment">// string to id;</span></span><br><span class="line"><span class="built_in">string</span> id2str[<span class="number">10005</span>]; <span class="comment">// id to string</span></span><br><span class="line">INF inf[<span class="number">10005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> curid = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">string</span> name;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; name;</span><br><span class="line">        <span class="keyword">if</span> (str2id.<span class="built_in">find</span>(name) == str2id.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            str2id[name] = curid;</span><br><span class="line">            id2str[curid] = name;</span><br><span class="line">            curid ++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d"</span>, &amp;hh, &amp;mm, &amp;ss);</span><br><span class="line">        <span class="keyword">int</span> t = time2int(hh, mm, ss);</span><br><span class="line">        <span class="built_in">string</span> type; <span class="built_in">cin</span> &gt;&gt; type;</span><br><span class="line">        inf[str2id[name]].in_out.push_back(t);</span><br><span class="line">        inf[str2id[name]].name = name;</span><br><span class="line">        inf[str2id[name]].id = str2id[name];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> len = curid - <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; maxTimeId;</span><br><span class="line">    <span class="keyword">int</span> maxTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; ++i) &#123;</span><br><span class="line">        sort(inf[i].in_out.<span class="built_in">begin</span>(), inf[i].in_out.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"size is "</span> &lt;&lt; inf[i].in_out.<span class="built_in">size</span>() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; inf[i].in_out.<span class="built_in">size</span>(); j += <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> diff = inf[i].in_out[j] - inf[i].in_out[j - <span class="number">1</span>];</span><br><span class="line">            inf[i].during += diff;</span><br><span class="line"><span class="comment">//             cout &lt;&lt; diff &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"during is "</span> &lt;&lt; inf[i].during &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (inf[i].during &gt; maxTime) &#123;</span><br><span class="line">            maxTime = inf[i].during;</span><br><span class="line">            maxTimeId.<span class="built_in">clear</span>();</span><br><span class="line">            maxTimeId.push_back(inf[i].name);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (inf[i].during == maxTime) &#123;</span><br><span class="line">            maxTimeId.push_back(inf[i].name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d"</span>, &amp;hh, &amp;mm, &amp;ss);</span><br><span class="line">        <span class="keyword">int</span> t = time2int(hh, mm, ss);</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= len; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> idx = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (idx &lt; inf[j].in_out.<span class="built_in">size</span>()) &#123;</span><br><span class="line">                <span class="keyword">int</span> in_time = inf[j].in_out[idx - <span class="number">1</span>], out_time = inf[j].in_out[idx];</span><br><span class="line">                <span class="keyword">if</span> (out_time &gt;= t &amp;&amp; in_time &lt;= t) &#123;</span><br><span class="line">                    cnt ++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                idx += <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(maxTimeId.<span class="built_in">begin</span>(), maxTimeId.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxTimeId.<span class="built_in">size</span>(); ++i) <span class="built_in">cout</span> &lt;&lt; maxTimeId[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp = int2time(maxTime);</span><br><span class="line"><span class="comment">//     cout &lt;&lt; maxTime &lt;&lt; " " &lt;&lt; tmp[2] &lt;&lt; " " &lt;&lt; tmp[1] &lt;&lt; " " &lt;&lt; tmp[0] &lt;&lt; endl;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d\n"</span>, tmp[<span class="number">2</span>], tmp[<span class="number">1</span>], tmp[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考题解"><a href="#参考题解" class="headerlink" title="参考题解"></a>参考题解</h2><p><a href="https://www.liuchuo.net/archives/2951" target="_blank" rel="noopener">https://www.liuchuo.net/archives/2951</a></p>
<p>这个解有三点非常巧妙：</p>
<ol>
<li>处理in和out的合法性</li>
<li>cnt数组计算flag的时间线前缀和</li>
<li>利用query的时间序，使得做query的复杂度由最坏情况下的O(nk)优化到稳定的O(n)</li>
</ol>
<p>均以注释的形式在代码中给出</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> id[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> time, flag = <span class="number">0</span>; <span class="comment">// 1代表in, -1代表out, 这样设计是为了后面的前缀和求取</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(node a, node b)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 第一标尺：字母序 第二标尺：时间序</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">strcmp</span>(a.id, b.id) != <span class="number">0</span>) <span class="keyword">return</span> <span class="built_in">strcmp</span>(a.id, b.id) &lt; <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> a.time &lt; b.time;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(node a, node b)</span> </span>&#123;<span class="keyword">return</span> a.time &lt; b.time;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, k, maxTime = <span class="number">-1</span>, tmpidx = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d\n"</span>, &amp;n, &amp;k);</span><br><span class="line">    vector&lt;node&gt; record(n), car;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">char</span> tmp[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">int</span> h, m, s;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s %d:%d:%d %s\n"</span>, record[i].id, &amp;h, &amp;m, &amp;s, tmp); <span class="comment">// 用字符数组scanf字符串</span></span><br><span class="line">        <span class="keyword">int</span> tmptime = h * <span class="number">3600</span> + m * <span class="number">60</span> + s;</span><br><span class="line">        record[i].time = tmptime;</span><br><span class="line">        record[i].flag = <span class="built_in">strcmp</span>(tmp, <span class="string">"in"</span>) == <span class="number">0</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(record.<span class="built_in">begin</span>(), record.<span class="built_in">end</span>(), cmp1); <span class="comment">// 按照(字母，时间)序进行排序</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mapp; <span class="comment">// mapp[str]的值代表名字为str的during之和</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">strcmp</span>(record[i].id, record[i+<span class="number">1</span>].id) == <span class="number">0</span> &amp;&amp; record[i].flag == <span class="number">1</span> &amp;&amp; record[i+<span class="number">1</span>].flag == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">// 最关键的步骤之一！如果时间线上紧挨的两个节点正好是某车辆的一进一出，算作一次合法的进出</span></span><br><span class="line">            <span class="comment">// 针对这样的处理方法原题中已经给出了提示：Note that all times will be within a single day. Each in record is paired with the chronologically next record for the same car provided it is an out record. </span></span><br><span class="line">            <span class="comment">// 没有想到这种方法可能是能力不足，但是原题中既然已经给了，也暴露出了很大的读题问题</span></span><br><span class="line">            car.push_back(record[i]);</span><br><span class="line">            car.push_back(record[i + <span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// car存储了一个个合法的二元组（每个二元组是进出时间）</span></span><br><span class="line">            mapp[record[i].id] += (record[i + <span class="number">1</span>].time - record[i].time);</span><br><span class="line">            <span class="keyword">if</span> (maxTime &lt; mapp[record[i].id]) &#123;</span><br><span class="line">                maxTime = mapp[record[i].id]; <span class="comment">// 顺便计算所有汽车的最长时间</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(car.<span class="built_in">begin</span>(), car.<span class="built_in">end</span>(), cmp2); <span class="comment">// 将合法in，out按照时间线进行排序</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 最关键的步骤之二！cnt数组的设计允许我们以O(n)的时间获取到每个query的答案</span></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">cnt</span><span class="params">(car.<span class="built_in">size</span>())</span></span>;  <span class="comment">// cnt[i]代表时间点car[i].time时的车辆的数量，可以看作是flag按照时间排序的前缀和</span></span><br><span class="line">    cnt[<span class="number">0</span>] = car[<span class="number">0</span>].flag;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; car.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        cnt[i] = cnt[i - <span class="number">1</span>] + car[i].flag;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始做query</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> h, m, s;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d"</span>, &amp;h, &amp;m, &amp;s);</span><br><span class="line">        <span class="keyword">int</span> tmptime = h * <span class="number">3600</span> + m * <span class="number">60</span> + s;</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span> (j = tmpidx; j &lt; car.<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">            <span class="comment">// 最关键的步骤之三！由于题目中的queries是按照时间顺序排列的</span></span><br><span class="line">            <span class="comment">// 所以当第一个query得到答案后，下一个query可以接着上一个idx进行寻找，不必从头开始</span></span><br><span class="line">            <span class="keyword">if</span> (car[j].time &gt; tmptime) &#123;</span><br><span class="line">                <span class="comment">// 如果query的时间在car的最晚时间之内</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt[j - <span class="number">1</span>]); <span class="comment">// 输出最后一个不晚于querytime的时间</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == car.<span class="built_in">size</span>() - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// 如果query的时间比car的最晚时间还要晚</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        tmpidx = j;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = mapp.<span class="built_in">begin</span>(); it != mapp.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;second == maxTime)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%s "</span>, it-&gt;first.c_str()); <span class="comment">// 注意char数组的输出方式</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d\n"</span>, maxTime / <span class="number">3600</span>, (maxTime % <span class="number">3600</span>) / <span class="number">60</span>, maxTime % <span class="number">60</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1097-Deduplication-on-a-Linked-List"><a href="#1097-Deduplication-on-a-Linked-List" class="headerlink" title="1097 Deduplication on a Linked List"></a>1097 Deduplication on a Linked List</h1><p>注意：链表题的输入中，虽然给定了头节点，但是所给输入中的链条可能不止一条链，不属于头节点的节点不要算上！</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> add, nex, val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;ListNode&gt; l, lis, after, remov;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; add2id;</span><br><span class="line"><span class="keyword">int</span> valvis[<span class="number">10005</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PRINT</span><span class="params">(<span class="built_in">vector</span>&lt;ListNode&gt; &amp;arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%05d %d "</span>, arr[i].add, arr[i].val);</span><br><span class="line">        <span class="keyword">if</span> (i == arr.<span class="built_in">size</span>() - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%05d\n"</span>, arr[i + <span class="number">1</span>].add);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> first, n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; first &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        ListNode tmp;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d\n"</span>, &amp;tmp.add, &amp;tmp.val, &amp;tmp.nex);</span><br><span class="line">        l.push_back(tmp);</span><br><span class="line">        add2id[tmp.add] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> root = add2id[first];</span><br><span class="line">    <span class="keyword">int</span> cur = first;</span><br><span class="line">    <span class="keyword">while</span> (cur != <span class="number">-1</span>) &#123;</span><br><span class="line">        lis.push_back(l[add2id[cur]]);</span><br><span class="line">        cur = lis.back().nex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lis.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> val = lis[i].val;</span><br><span class="line">        <span class="keyword">if</span> (valvis[<span class="built_in">abs</span>(val)] == <span class="number">0</span>) &#123;</span><br><span class="line">            valvis[<span class="built_in">abs</span>(val)] = <span class="number">1</span>;</span><br><span class="line">            after.push_back(lis[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            remov.push_back(lis[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    PRINT(after);</span><br><span class="line">    PRINT(remov);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1098-Insertion-or-Heap-Sort"><a href="#1098-Insertion-or-Heap-Sort" class="headerlink" title="1098 Insertion or Heap Sort"></a>1098 Insertion or Heap Sort</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">105</span>], after[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> disOrderIdx = <span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// insert 1, heap 0</span></span><br><span class="line">    <span class="comment">// 插入排序在经过k次迭代后，前k个数一定是有序的且后n-k个数与原序列相等</span></span><br><span class="line">    <span class="comment">// 获取after序列的第一个非递增的idx为idx1</span></span><br><span class="line">    <span class="comment">// 获取after序列从后向前遍历的最后一个与arr序列不相等的idx为idx2</span></span><br><span class="line">    <span class="comment">// 只要idx1 &gt;= idx2 就合法, disOrderIdx = idx1</span></span><br><span class="line">    <span class="keyword">int</span> idx1 = <span class="number">1</span>, idx2 = n;</span><br><span class="line">    <span class="keyword">while</span> (idx1 &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (after[idx1] &gt; after[idx1 + <span class="number">1</span>]) <span class="keyword">break</span>;</span><br><span class="line">        idx1 ++;</span><br><span class="line">    &#125;</span><br><span class="line">    idx1 ++;</span><br><span class="line">    <span class="keyword">while</span> (idx2 &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (after[idx2] != arr[idx2]) <span class="keyword">break</span>;</span><br><span class="line">        idx2--;</span><br><span class="line">    &#125;</span><br><span class="line">    disOrderIdx = idx1;</span><br><span class="line">    <span class="keyword">if</span> (idx1 &gt;= idx2) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">downadjust</span><span class="params">(<span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = low, j = i * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span> (j &lt;= high) &#123;</span><br><span class="line">        <span class="keyword">if</span> (j + <span class="number">1</span> &lt;= high &amp;&amp; after[j + <span class="number">1</span>] &gt; after[j])</span><br><span class="line">            j = j + <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (after[j] &gt; after[i]) &#123;</span><br><span class="line">            swap(after[i], after[j]);</span><br><span class="line">            i = j;</span><br><span class="line">            j = i * <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;after[i]);</span><br><span class="line">    <span class="keyword">if</span> (judge() == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Insertion Sort\n"</span>);</span><br><span class="line">        <span class="keyword">int</span> idx = disOrderIdx;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = idx; i &gt;= <span class="number">2</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (after[i] &lt; after[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                swap(after[i], after[i - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Heap Sort\n"</span>);</span><br><span class="line">        <span class="keyword">int</span> i = n;</span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">2</span> &amp;&amp; after[i] &gt;= after[i - <span class="number">1</span>]) i--;</span><br><span class="line">        swap(after[i], after[<span class="number">1</span>]);</span><br><span class="line">        downadjust(<span class="number">1</span>, i - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d"</span>, after[i]);</span><br><span class="line">        <span class="keyword">if</span> (i != n) <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="1003-Emergency"><a href="#1003-Emergency" class="headerlink" title="1003 Emergency"></a>1003 Emergency</h1><h2 id="DFS-1"><a href="#DFS-1" class="headerlink" title="DFS"></a>DFS</h2><p>略</p>
<h2 id="Dijkstra-DFS"><a href="#Dijkstra-DFS" class="headerlink" title="Dijkstra+DFS"></a>Dijkstra+DFS</h2><ol>
<li>Dijkstra仅考虑距离，得到所有路径</li>
<li>从终点递归向前溯源path数组，并最优化结果</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, c1, c2;</span><br><span class="line"><span class="keyword">int</span> u, v, l;</span><br><span class="line"><span class="keyword">int</span> teams[<span class="number">505</span>], vis[<span class="number">505</span>];</span><br><span class="line"><span class="keyword">int</span> graph[<span class="number">505</span>][<span class="number">505</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path[<span class="number">505</span>];</span><br><span class="line"><span class="keyword">int</span> dis[<span class="number">505</span>];</span><br><span class="line"><span class="keyword">int</span> maxTeams = <span class="number">0</span>, num = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur, <span class="keyword">int</span> tms)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cur == c1) &#123;</span><br><span class="line">        maxTeams = <span class="built_in">max</span>(tms, maxTeams);</span><br><span class="line">        num++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;pre : path[cur]) &#123;</span><br><span class="line">        dfs(pre, tms + teams[pre]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; c1 &gt;&gt; c2;</span><br><span class="line">    <span class="built_in">memset</span>(graph, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> graph);</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dis);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;teams[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;u, &amp;v, &amp;l);</span><br><span class="line">        graph[u][v] = l;</span><br><span class="line">        graph[v][u] = l;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Dijkstra</span></span><br><span class="line">    dis[c1] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> minLen = INF, idx = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] == <span class="number">0</span> &amp;&amp; dis[j] &lt; minLen) &#123;</span><br><span class="line">                minLen = dis[j];</span><br><span class="line">                idx = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (idx == <span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">        vis[idx] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] == <span class="number">0</span> &amp;&amp; graph[idx][j] != INF) &#123;</span><br><span class="line">                <span class="keyword">if</span> (dis[idx] + graph[idx][j] &lt; dis[j]) &#123;</span><br><span class="line">                    dis[j] = dis[idx] + graph[idx][j];</span><br><span class="line">                    path[j].<span class="built_in">clear</span>();</span><br><span class="line">                    path[j].push_back(idx);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dis[idx] + graph[idx][j] == dis[j]) &#123;</span><br><span class="line">                    path[j].push_back(idx);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    maxTeams = teams[c2];</span><br><span class="line">    dfs(c2, maxTeams);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="string">" "</span> &lt;&lt; maxTeams &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Dijkstra双标尺"><a href="#Dijkstra双标尺" class="headerlink" title="Dijkstra双标尺"></a>Dijkstra双标尺</h2><p>第一标尺：边权和，dis数组表示</p>
<p>第二标尺：点权和，w数组表示</p>
<p>num数组记录最短路径个数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, c1, c2;</span><br><span class="line"><span class="keyword">int</span> u, v, l;</span><br><span class="line"><span class="keyword">int</span> teams[<span class="number">505</span>], vis[<span class="number">505</span>];</span><br><span class="line"><span class="keyword">int</span> graph[<span class="number">505</span>][<span class="number">505</span>];</span><br><span class="line"><span class="keyword">int</span> dis[<span class="number">505</span>], w[<span class="number">505</span>], nums[<span class="number">505</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; c1 &gt;&gt; c2;</span><br><span class="line">    <span class="built_in">memset</span>(graph, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> graph);</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dis);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;teams[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;u, &amp;v, &amp;l);</span><br><span class="line">        graph[u][v] = l;</span><br><span class="line">        graph[v][u] = l;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Dijkstra</span></span><br><span class="line">    dis[c1] = <span class="number">0</span>;</span><br><span class="line">    nums[c1] = <span class="number">1</span>;</span><br><span class="line">    w[c1] = teams[c1];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> minLen = INF, idx = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] == <span class="number">0</span> &amp;&amp; dis[j] &lt; minLen) &#123;</span><br><span class="line">                minLen = dis[j];</span><br><span class="line">                idx = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (idx == <span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">        vis[idx] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] == <span class="number">0</span> &amp;&amp; graph[idx][j] != INF) &#123;</span><br><span class="line">                <span class="keyword">if</span> (dis[idx] + graph[idx][j] &lt; dis[j]) &#123;</span><br><span class="line">                    dis[j] = dis[idx] + graph[idx][j];</span><br><span class="line">                    w[j] = w[idx] + teams[j];</span><br><span class="line">                    nums[j] = nums[idx];</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dis[idx] + graph[idx][j] == dis[j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (w[idx] + teams[j] &gt; w[j]) &#123;</span><br><span class="line">                        w[j] = w[idx] + teams[j];</span><br><span class="line">                    &#125;</span><br><span class="line">                    nums[j] += nums[idx];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; nums[c2] &lt;&lt; <span class="string">" "</span> &lt;&lt; w[c2] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1131-Subway-Map"><a href="#1131-Subway-Map" class="headerlink" title="1131 Subway Map"></a>1131 Subway Map</h1><p><a href="https://www.liuchuo.net/archives/3850" target="_blank" rel="noopener">参考该题解优化内存</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">1e5</span> + <span class="number">5</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> vis[maxN];</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; <span class="built_in">line</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; graph[maxN];</span><br><span class="line"><span class="keyword">int</span> n, k, pre, u, v;</span><br><span class="line"><span class="keyword">int</span> best_transfers, best_stops;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ansPath;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PRINT</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;path)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = path.<span class="built_in">size</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> start = path[<span class="number">0</span>], lastline = <span class="built_in">line</span>[path[<span class="number">0</span>] * <span class="number">10000</span> + path[<span class="number">1</span>]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; path.<span class="built_in">size</span>() - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> curline = <span class="built_in">line</span>[path[i] * <span class="number">10000</span> + path[i + <span class="number">1</span>]];</span><br><span class="line">        <span class="keyword">if</span> (curline == lastline) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Take Line#%d from %04d to %04d.\n"</span>, lastline, start, path[i]);</span><br><span class="line">        lastline = curline;</span><br><span class="line">        start = path[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Take Line#%d from %04d to %04d.\n"</span>, <span class="built_in">line</span>[path[cnt - <span class="number">2</span>] * <span class="number">10000</span> + path[cnt - <span class="number">1</span>]], start, path[cnt - <span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur, <span class="keyword">int</span> <span class="built_in">end</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;path, <span class="keyword">int</span> tran)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cur == <span class="built_in">end</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (path.<span class="built_in">size</span>() &lt; best_stops || (path.<span class="built_in">size</span>() == best_stops &amp;&amp; tran &lt; best_transfers)) &#123;</span><br><span class="line">            ansPath = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(path);</span><br><span class="line">            best_transfers = tran;</span><br><span class="line">            best_stops = path.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> lastline = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (path.<span class="built_in">size</span>() &gt; <span class="number">1</span>) lastline = <span class="built_in">line</span>[path[path.<span class="built_in">size</span>() - <span class="number">2</span>] * <span class="number">10000</span> + cur];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; graph[cur].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> nex = graph[cur][i];</span><br><span class="line">        <span class="keyword">if</span> (vis[nex] == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> curline = <span class="built_in">line</span>[cur * <span class="number">10000</span> + nex];</span><br><span class="line">            path.push_back(nex);</span><br><span class="line">            vis[nex] = <span class="number">1</span>;</span><br><span class="line">            dfs(nex, <span class="built_in">end</span>, path, tran + (curline != lastline));</span><br><span class="line">            vis[nex] = <span class="number">0</span>;</span><br><span class="line">            path.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">    best_transfers = INF, best_stops = INF;</span><br><span class="line">    ansPath.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path;</span><br><span class="line">    <span class="keyword">int</span> transfers = <span class="number">-1</span>;</span><br><span class="line">    path.push_back(u);</span><br><span class="line">    vis[u] = <span class="number">1</span>;</span><br><span class="line">    dfs(u, v, path, transfers);</span><br><span class="line">    PRINT(ansPath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;k, &amp;pre);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;tmp);</span><br><span class="line">            graph[tmp].push_back(pre);</span><br><span class="line">            graph[pre].push_back(tmp);</span><br><span class="line">            <span class="built_in">line</span>[tmp * <span class="number">10000</span> + pre] = <span class="built_in">line</span>[pre * <span class="number">10000</span> + tmp] = i;</span><br><span class="line">            pre = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;u, &amp;v);</span><br><span class="line">        solution(u, v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1007-Maximum-Subsequence-Sum"><a href="#1007-Maximum-Subsequence-Sum" class="headerlink" title="1007 Maximum Subsequence Sum"></a>1007 Maximum Subsequence Sum</h1><h2 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">1e4</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> arr[maxN], pre[maxN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) pre[i] = pre[i - <span class="number">1</span>] + arr[i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">int</span> maxSum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> l = maxN + <span class="number">1</span>, r = maxN + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = pre[j] - pre[i];</span><br><span class="line">            <span class="keyword">if</span> (tmp &gt; maxSum || (tmp == maxSum &amp;&amp; i + j &lt; l + r)) &#123;</span><br><span class="line">                maxSum = tmp;</span><br><span class="line">                l = i;</span><br><span class="line">                r = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (l == maxN + <span class="number">1</span> &amp;&amp; r == maxN + <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"0 %d %d\n"</span>, arr[<span class="number">0</span>], arr[n - <span class="number">1</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, maxSum, arr[l], arr[r - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="贪心"><a href="#贪心" class="headerlink" title="贪心"></a>贪心</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">1e4</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n; <span class="keyword">int</span> arr[maxN];</span><br><span class="line"><span class="keyword">int</span> dp[maxN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>, tmpSum = <span class="number">0</span>, ans = <span class="number">-1</span>, tmpIdx = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">        tmpSum += arr[i];</span><br><span class="line">        <span class="keyword">if</span> (tmpSum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            tmpSum = <span class="number">0</span>;</span><br><span class="line">            tmpIdx = i + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tmpSum &gt; ans) &#123;</span><br><span class="line">            ans = tmpSum;</span><br><span class="line">            l = tmpIdx;</span><br><span class="line">            r = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ans = <span class="built_in">max</span>(<span class="number">0</span>, ans);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, ans, arr[l], arr[r]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>证明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">若存在区间和sum(l, r)使得[0, n-1]该区间和最大，则sum(l, r)在[0, r]区间和依然最大。</span><br><span class="line"></span><br><span class="line">设有一个顺序遍历的指针r，l是区间的左边界，若当前指针r*使得在[0, r*]区间sum(l, r*)最大，则对于区间[0, l - 1]的任意下标i，均使得区间和sum(i, l-1)&lt;0，这一点很好证明（若有sum(i, l-1)&gt;0，则必有sum(i, r*) &#x3D; sum(i, l-1) + sum(l, r*) &gt; sum(l, r*)，与最大区间和的假设矛盾）。</span><br><span class="line">因此在顺序遍历的过程中，当指针r使得临时区间和tmpSum&#x3D;sum(l,r)&lt;0时，应及时“截断”，将当前的左边界更新成r+1,并继续向下迭代，只要tmpSum优于当前全局解就对全局解更新，最后一次更新的全局解便是最优解，且满足坐标较小的要求。</span><br></pre></td></tr></table></figure>



<h1 id="1060-Are-They-Equal"><a href="#1060-Are-They-Equal" class="headerlink" title="1060 Are They Equal"></a>1060 Are They Equal</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PSI pair<span class="meta-string">&lt;string, int&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="built_in">string</span> a, b;</span><br><span class="line"></span><br><span class="line"><span class="function">PSI <span class="title">solution</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pos = <span class="number">0</span>, n = s.length();</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">string</span> base;</span><br><span class="line">    <span class="keyword">while</span> (pos &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[pos] == <span class="string">'.'</span>) <span class="keyword">break</span>;</span><br><span class="line">        pos ++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (pos == n) &#123;</span><br><span class="line">        <span class="comment">// 无小数点</span></span><br><span class="line">        base = s.substr(<span class="number">0</span>, <span class="built_in">min</span>(N, n));</span><br><span class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] != <span class="string">'0'</span>) t = n;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 有小数点</span></span><br><span class="line">        <span class="keyword">int</span> posl = <span class="number">0</span>; <span class="comment">// 第一个有效数字的位置</span></span><br><span class="line">        <span class="keyword">while</span> (posl &lt; n) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[posl] != <span class="string">'0'</span> &amp;&amp; s[posl] != <span class="string">'.'</span>) <span class="keyword">break</span>;</span><br><span class="line">            posl ++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (posl == n) &#123;</span><br><span class="line">            <span class="comment">// 证明该数是0.0</span></span><br><span class="line">            <span class="built_in">string</span> tmp = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i) tmp.push_back(<span class="string">'0'</span>);</span><br><span class="line">            <span class="keyword">return</span> make_pair(tmp, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        t = pos - posl;</span><br><span class="line">        <span class="keyword">if</span> (posl &gt; pos) ++ t;</span><br><span class="line">        <span class="built_in">string</span> justnum = s.substr(<span class="number">0</span>, pos) + s.substr(pos + <span class="number">1</span>, n - <span class="number">1</span> - pos); <span class="comment">// 将小数点剔除</span></span><br><span class="line">        posl = <span class="number">0</span>; <span class="comment">// 去掉小数点后重新计算第一个有效数字索引</span></span><br><span class="line">        <span class="keyword">while</span> (posl &lt; n - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (justnum[posl] != <span class="string">'0'</span>) <span class="keyword">break</span>;</span><br><span class="line">            posl ++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> k = n - <span class="number">2</span> - posl + <span class="number">1</span>;</span><br><span class="line">        base = justnum.substr(posl, <span class="built_in">min</span>(N, k)); <span class="comment">// 从第一个有效数字往后取k位</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 对base补后0</span></span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">size</span> = base.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">size</span> != N) &#123;</span><br><span class="line">        base.push_back(<span class="string">'0'</span>);</span><br><span class="line">        <span class="built_in">size</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> make_pair(base, t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    PSI ans1 = solution(a);</span><br><span class="line">    PSI ans2 = solution(b);</span><br><span class="line">    <span class="keyword">if</span> (ans1.first == ans2.first &amp;&amp; ans1.second == ans2.second) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES 0."</span> &lt;&lt; ans1.first &lt;&lt; <span class="string">"*10^"</span> &lt;&lt; ans1.second &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO 0."</span> &lt;&lt; ans1.first &lt;&lt; <span class="string">"*10^"</span> &lt;&lt; ans1.second &lt;&lt; <span class="string">" "</span> &lt;&lt; <span class="string">"0."</span> &lt;&lt; ans2.first &lt;&lt; <span class="string">"*10^"</span> &lt;&lt; ans2.second &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1061-Date"><a href="#1061-Date" class="headerlink" title="1061 Date"></a>1061 Date</h1><p>有关这题遇到的问题统一写在这里，目前怀疑是平台编译器的问题。</p>
<p>测试用例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3485djDkx&amp;4hhGE </span><br><span class="line">2984akDfk&amp;kkggEdsb </span><br><span class="line">a&amp;hgsfd7 </span><br><span class="line">b&amp;Hyscv7m</span><br></pre></td></tr></table></figure>

<p>首先声明下列程序是有问题的(不算上前面的测试性输出)：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">65</span>], b[<span class="number">65</span>], c[<span class="number">65</span>], d[<span class="number">65</span>];</span><br><span class="line"><span class="built_in">string</span> ans[<span class="number">7</span>] = &#123;<span class="string">"MON"</span>, <span class="string">"TUE"</span>, <span class="string">"WED"</span>, <span class="string">"THU"</span>, <span class="string">"FRI"</span>, <span class="string">"SAT"</span>, <span class="string">"SUN"</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s%s%s%s"</span>, a, b, c, d);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">string</span> day;</span><br><span class="line">    <span class="keyword">int</span> hh, mm;</span><br><span class="line"><span class="comment">//     cout &lt;&lt; isdigit('&amp;') &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">while</span> (a[i] != <span class="string">'\0'</span> &amp;&amp; b[i] != <span class="string">'\0'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == b[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &lt;= <span class="string">'G'</span> &amp;&amp; a[i] &gt;= <span class="string">'A'</span>) &#123;</span><br><span class="line">                day = ans[a[i] - <span class="string">'A'</span>];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ++ i;</span><br><span class="line">    &#125;</span><br><span class="line">    ++ i;</span><br><span class="line"><span class="comment">//     cout &lt;&lt; hh &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">while</span> (a[i] != <span class="string">'\0'</span> &amp;&amp; b[i] != <span class="string">'\0'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == b[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &lt;= <span class="string">'N'</span> &amp;&amp; a[i] &gt;= <span class="string">'A'</span>) &#123;</span><br><span class="line">                hh = a[i] - <span class="string">'A'</span> + <span class="number">10</span>;</span><br><span class="line"><span class="comment">//                 cout &lt;&lt; "命中大写字母在" &lt;&lt; "次" &lt;&lt; endl;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">isdigit</span>(a[i])) &#123;</span><br><span class="line"><span class="comment">//             else if (a[i] &lt;= '9' &amp;&amp; a[i] &gt;= '0') &#123;</span></span><br><span class="line">                hh = a[i] - <span class="string">'0'</span>;</span><br><span class="line"><span class="comment">//                 cout &lt;&lt; "命中isdigit在" &lt;&lt; "次" &lt;&lt; endl;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span> &lt;&lt; a[i] &lt;&lt; <span class="string">" "</span> &lt;&lt; hh &lt;&lt; <span class="string">" "</span> &lt;&lt; a[i] - <span class="string">'0'</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++ i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span> &lt;&lt; hh &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span> (c[j] != <span class="string">'\0'</span> &amp;&amp; d[j] != <span class="string">'\0'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (c[j] == d[j] &amp;&amp; <span class="built_in">isalpha</span>(c[j])) &#123;</span><br><span class="line"><span class="comment">//         if (c[j] == d[j] &amp;&amp; ((c[j] &lt;= 'Z' &amp;&amp; c[j] &gt;= 'A') || (c[j] &lt;= 'z' &amp;&amp; c[j] &gt;= 'a'))) &#123;</span></span><br><span class="line">            mm = j;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++ j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; day &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%02d:%02d\n"</span>, hh, mm);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不看程序的输出，单纯分析这个程序。由于用例的ab字符串的第二个相等字符是<code>&#39;&amp;&#39;</code>，既不属于[A-N]也不属于[0-9]，命中break语句，hh最后的输出应该是没有进行初始化的随机数。</p>
<h2 id="问题1：cout的”观察者效应“-g"><a href="#问题1：cout的”观察者效应“-g" class="headerlink" title="问题1：cout的”观察者效应“(g++)"></a>问题1：cout的”观察者效应“(g++)</h2><h3 id="实验1：不对两句带”命中”的cout进行注释"><a href="#实验1：不对两句带”命中”的cout进行注释" class="headerlink" title="实验1：不对两句带”命中”的cout进行注释"></a>实验1：不对两句带”命中”的cout进行注释</h3><p>输出（与猜测相同，与实际相符）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9 &amp; 416060080 -10</span><br><span class="line">9 416060080</span><br><span class="line">THU 416060080:04</span><br></pre></td></tr></table></figure>

<h3 id="实验2：对两句带”命中”的cout进行注释"><a href="#实验2：对两句带”命中”的cout进行注释" class="headerlink" title="实验2：对两句带”命中”的cout进行注释"></a>实验2：对两句带”命中”的cout进行注释</h3><p>输出（与猜测不同！）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9 &amp; 0 -10</span><br><span class="line">9 0</span><br><span class="line">THU 00:04</span><br></pre></td></tr></table></figure>

<p>hh由随机数变成了0，但却不知道从哪里进行赋值的！</p>
<p><strong>就好像注释cout的行为使得量子(hh)产生了定态一样..</strong></p>
<h2 id="问题2：isdigit-‘-amp-’-和’-amp-’-lt-’9’-amp-amp-‘-amp-’-gt-’0’-不一样吗？-g"><a href="#问题2：isdigit-‘-amp-’-和’-amp-’-lt-’9’-amp-amp-‘-amp-’-gt-’0’-不一样吗？-g" class="headerlink" title="问题2：isdigit(‘&amp;’)和’&amp;’&lt;=’9’ &amp;&amp; ‘&amp;’ &gt;=’0’ 不一样吗？(g++)"></a>问题2：isdigit(‘&amp;’)和’&amp;’&lt;=’9’ &amp;&amp; ‘&amp;’ &gt;=’0’ 不一样吗？(g++)</h2><h3 id="实验1：采取isdigit函数，不输出"><a href="#实验1：采取isdigit函数，不输出" class="headerlink" title="实验1：采取isdigit函数，不输出"></a>实验1：采取isdigit函数，不输出</h3><p>输出就是问题1的实验2结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9 &amp; 0 -10</span><br><span class="line">9 0</span><br><span class="line">THU 00:04</span><br></pre></td></tr></table></figure>

<h3 id="实验2：采取a-i-lt-‘9’-amp-amp-a-i-gt-‘0’的策略，不输出"><a href="#实验2：采取a-i-lt-‘9’-amp-amp-a-i-gt-‘0’的策略，不输出" class="headerlink" title="实验2：采取a[i] &lt;= ‘9’ &amp;&amp; a[i] &gt;= ‘0’的策略，不输出"></a>实验2：采取a[i] &lt;= ‘9’ &amp;&amp; a[i] &gt;= ‘0’的策略，不输出</h3><p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9 &amp; -1046433088 -10</span><br><span class="line">9 -1046433088</span><br><span class="line">THU -1046433088:04</span><br></pre></td></tr></table></figure>

<p>自己品吧..</p>
<h2 id="问题3：未命中却出现更改的奇景-clang"><a href="#问题3：未命中却出现更改的奇景-clang" class="headerlink" title="问题3：未命中却出现更改的奇景(clang++)"></a>问题3：未命中却出现更改的奇景(clang++)</h2><p>本次cout的出现并未对结果产生影响。</p>
<p>输出（与猜测不同）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9 &amp; -10 -10</span><br><span class="line">9 -10</span><br><span class="line">THU -10:04</span><br></pre></td></tr></table></figure>

<p>可以看出程序并没有命中if和else if语句，但hh却修改成了-10，从后面的输出发现，hh是<code>&#39;&amp;&#39;</code>字符，也就是hh产生的更改是因为<code>hh = &#39;&amp;&#39; - &#39;0&#39;</code>，也就是说它命中了else if语句(我们暂且不管这是怎么命中的，因为显然<code>isdigit(&#39;&amp;&#39;)==0</code>），但却没有输出else if中的所有语句！这简直是胡闹！</p>
<h2 id="问题4：a-i-属于-0-9-的判断语句替代isdigit-clang"><a href="#问题4：a-i-属于-0-9-的判断语句替代isdigit-clang" class="headerlink" title="问题4：a[i]属于[0-9]的判断语句替代isdigit(clang++)"></a>问题4：a[i]属于[0-9]的判断语句替代isdigit(clang++)</h2><p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9 &amp; 38 -10</span><br><span class="line">9 38</span><br><span class="line">THU 38:04</span><br></pre></td></tr></table></figure>









<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>采用clang++/采用g++，采用isdigit()/采用a[i]属于[0-9]，使用cout/不使用cout。笛卡尔乘积后共八种情况，将输入用一个三位的二进制表示：</p>
<ul>
<li>编译器采用clang++，高位为1。编译器采用g++，高位为0。</li>
<li>采用isdigit()，中位为1。采用a[i] &lt;=’9’ &amp;&amp; a[i] &gt;= ‘0’，中位为0。</li>
<li>使用cout，低位为1。不使用cout，低位为0。</li>
</ul>
<table>
<thead>
<tr>
<th>输入</th>
<th>输出hh</th>
</tr>
</thead>
<tbody><tr>
<td>000（g++，0-9，不用cout）</td>
<td>随机数</td>
</tr>
<tr>
<td>001（g++，0-9，用cout）</td>
<td>随机数</td>
</tr>
<tr>
<td>010（g++，isdigit()，不用cout）</td>
<td>0</td>
</tr>
<tr>
<td>011（g++，isdigit()，用cout）</td>
<td>随机数</td>
</tr>
<tr>
<td>100（clang++，0-9，不用cout）</td>
<td>-10(-10是<code>&#39;&amp;&#39;-&#39;0&#39;</code>的结果)</td>
</tr>
<tr>
<td>101（clang++，0-9，用cout）</td>
<td>38(38是<code>&#39;&amp;&#39;</code>的ascii码值)</td>
</tr>
<tr>
<td>110（clang++，isdigit()，不用cout）</td>
<td>-10(-10是<code>&#39;&amp;&#39;-&#39;0&#39;</code>的结果)</td>
</tr>
<tr>
<td>111（clang++，isdigit()，用cout）</td>
<td>-10(-10是<code>&#39;&amp;&#39;-&#39;0&#39;</code>的结果)</td>
</tr>
</tbody></table>
<h1 id="1073-Scientific-Notation"><a href="#1073-Scientific-Notation" class="headerlink" title="1073 Scientific Notation"></a>1073 Scientific Notation</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">string</span> a, b, tmp;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; tmp;</span><br><span class="line">    <span class="keyword">int</span> n = tmp.<span class="built_in">size</span>(), j = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (tmp[j] == <span class="string">'E'</span>) <span class="keyword">break</span>;</span><br><span class="line">        -- j;</span><br><span class="line">    &#125;</span><br><span class="line">    a = tmp.substr(<span class="number">0</span>, j);</span><br><span class="line">    b = tmp.substr(j + <span class="number">1</span>, n - j - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> lena = a.<span class="built_in">size</span>(), lenb = b.<span class="built_in">size</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">bool</span> neg1 = <span class="literal">false</span>, neg2 = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (a[<span class="number">0</span>] == <span class="string">'-'</span>) neg1 = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (b[<span class="number">0</span>] == <span class="string">'-'</span>) neg2 = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">int</span> expo = <span class="number">0</span>, i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; lenb) &#123;</span><br><span class="line">        expo = expo * <span class="number">10</span> + b[i ++] - <span class="string">'0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (neg2) expo *= (<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">int</span> posd = <span class="number">-1</span>, posn = <span class="number">-1</span>; <span class="comment">// posd小数点位置，posn第一位有效数字的位置</span></span><br><span class="line">    i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; lena) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == <span class="string">'.'</span>) &#123;</span><br><span class="line">            posd = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        ++ i;</span><br><span class="line">    &#125;</span><br><span class="line">    i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; lena) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] != <span class="string">'0'</span> &amp;&amp; i != posd) &#123;</span><br><span class="line">            posn = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> k = posn;</span><br><span class="line">    <span class="keyword">int</span> posd_ = posd + expo; <span class="comment">// 新小数点的位置</span></span><br><span class="line">    <span class="keyword">if</span> (neg1) <span class="built_in">printf</span>(<span class="string">"-"</span>);</span><br><span class="line">    <span class="keyword">if</span> (posd_ &lt;= posn) &#123;</span><br><span class="line">        <span class="comment">// 小数点在第一位有效数字之前, 0.0123</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"0."</span>);</span><br><span class="line">        <span class="keyword">int</span> zero = posn - posd_;</span><br><span class="line">        <span class="keyword">while</span> (zero--) <span class="built_in">printf</span>(<span class="string">"0"</span>);</span><br><span class="line">        <span class="keyword">while</span> (k &lt; lena) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">isdigit</span>(a[k])) <span class="built_in">printf</span>(<span class="string">"%c"</span>, a[k]);</span><br><span class="line">            ++ k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 小数点在第一位有效数字之后, 1.2300</span></span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (k &lt; lena) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">isdigit</span>(a[k])) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%c"</span>, a[k]);</span><br><span class="line">                cnt ++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (cnt == posd_ - posn &amp;&amp; posd_ &lt; lena - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">"."</span>);</span><br><span class="line">            ++ k;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; posd_ - posn - cnt; ++i) <span class="built_in">printf</span>(<span class="string">"0"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1016-Phone-Bills"><a href="#1016-Phone-Bills" class="headerlink" title="1016 Phone Bills"></a>1016 Phone Bills</h1><p>涉及时间的模拟排序：</p>
<ol>
<li>倾向于先构建适合题目的结构体数组（以一个节点为单位），并按照时序进行排序，处理好后统一放到最后的数组中进行最后处理。</li>
<li>对于前后配对类型的（这题是in-out配对），注意只有时间上严格相邻的才能配对（同类型题目参照1095）。</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> money[<span class="number">24</span>];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> day_money = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NODE</span> &#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">int</span> MM, dd, hh, mm, status = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> time;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">NODE nodes[maxN];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">vector</span>&lt;NODE&gt; &gt; m;</span><br><span class="line"><span class="built_in">string</span> type;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(NODE &amp;n1, NODE &amp;n2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n1.name != n2.name) &#123;</span><br><span class="line">        <span class="keyword">return</span> n1.name &lt; n2.name;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n1.time &lt; n2.time;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">getCost</span><span class="params">(NODE &amp;node)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// time from 00:00:00 - dd:hh:mm</span></span><br><span class="line">    <span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line">    ans += (node.dd * day_money);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> h = <span class="number">0</span>; h &lt; node.hh; ++h) ans += money[h] * <span class="number">0.6</span>;</span><br><span class="line">    ans += (node.mm * money[node.hh] * <span class="number">0.01</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">24</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;money[i]);</span><br><span class="line">        day_money += (money[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    day_money *= <span class="number">0.6</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; nodes[i].name;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d:%d"</span>, &amp;nodes[i].MM, &amp;nodes[i].dd, &amp;nodes[i].hh, &amp;nodes[i].mm);</span><br><span class="line">        nodes[i].time = nodes[i].dd * <span class="number">24</span> * <span class="number">60</span> + nodes[i].hh * <span class="number">60</span> + nodes[i].mm;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; type;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="string">"on-line"</span>) nodes[i].status = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> nodes[i].status = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(nodes, nodes + n, cmp);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nodes[i].name == nodes[i - <span class="number">1</span>].name &amp;&amp; nodes[i].status == <span class="number">-1</span> &amp;&amp; nodes[i - <span class="number">1</span>].status == <span class="number">1</span>) &#123;</span><br><span class="line">            m[nodes[i].name].push_back(nodes[i - <span class="number">1</span>]);</span><br><span class="line">            m[nodes[i].name].push_back(nodes[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); ++ it) &#123;</span><br><span class="line">        <span class="built_in">string</span> name = it-&gt;first;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        <span class="keyword">double</span> sumCost = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%02d\n"</span>, m[name][<span class="number">0</span>].MM);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; m[name].<span class="built_in">size</span>(); i += <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">double</span> cost = getCost(m[name][i]) - getCost(m[name][i - <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">int</span> during = m[name][i].time - m[name][i - <span class="number">1</span>].time;</span><br><span class="line">            sumCost += cost;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d %02d:%02d:%02d %d $%.2lf\n"</span>, m[name][i<span class="number">-1</span>].dd, m[name][i<span class="number">-1</span>].hh, m[name][i<span class="number">-1</span>].mm, m[name][i].dd, m[name][i].hh, m[name][i].mm, during, cost);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Total amount: $%.02lf\n"</span>, sumCost);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1108-Finding-Average"><a href="#1108-Finding-Average" class="headerlink" title="1108 Finding Average"></a>1108 Finding Average</h1><h2 id="ac代码"><a href="#ac代码" class="headerlink" title="ac代码"></a>ac代码</h2><p>终于过了，原因是stoi只能转换INT_MAX以内的数据。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="keyword">double</span> sum = <span class="number">0</span>, cnt = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">getnum</span> <span class="params">(<span class="built_in">string</span> &amp;s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s.<span class="built_in">size</span>() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1001</span>;</span><br><span class="line">    <span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> posd = <span class="number">0</span>, p = <span class="number">0</span>, n = s.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">bool</span> neg = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'-'</span>) &#123;</span><br><span class="line">        p ++;</span><br><span class="line">        neg = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (neg &amp;&amp; n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1001</span>;</span><br><span class="line">    posd = p;</span><br><span class="line">    <span class="keyword">while</span> (posd &lt; n &amp;&amp; s[posd] != <span class="string">'.'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isdigit</span>(s[posd]) &amp;&amp; s[posd] != <span class="string">'.'</span>) <span class="keyword">return</span> <span class="number">1001</span>; <span class="comment">// 若存在除了.的非数字</span></span><br><span class="line">        posd ++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断是否只有一个小数点</span></span><br><span class="line">    <span class="keyword">int</span> posd_ = posd + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (posd_ &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[posd_ ++] == <span class="string">'.'</span>) <span class="keyword">return</span> <span class="number">1001</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有一个小数点</span></span><br><span class="line">    <span class="keyword">if</span> (posd &lt;= n - <span class="number">4</span>) <span class="keyword">return</span> <span class="number">1001</span>; <span class="comment">// 精度超过2</span></span><br><span class="line">    <span class="keyword">double</span> num1 = <span class="number">0</span>, num2 = <span class="number">0</span>; <span class="comment">// num1小数点前[p, posd - 1], num2小数点之后[q, n - 1]</span></span><br><span class="line">    <span class="keyword">int</span> q = posd + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (p &lt;= posd - <span class="number">1</span>) &#123;</span><br><span class="line">        num1 = num1 * <span class="number">10</span> + s[p ++] - <span class="string">'0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (q &lt;= n - <span class="number">1</span>) &#123;</span><br><span class="line">        num2 = num2 * <span class="number">10</span> + s[q ++] - <span class="string">'0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (num2 &lt; <span class="number">10</span>) num2 *= <span class="number">0.1</span>;</span><br><span class="line">    <span class="keyword">else</span> num2 *= <span class="number">0.01</span>;</span><br><span class="line">    ans = num1 + num2;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (neg) ans *= <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">        <span class="keyword">double</span> num = getnum(s);</span><br><span class="line">        <span class="keyword">if</span> (num &lt;= <span class="number">1000</span> &amp;&amp; num &gt;= <span class="number">-1000</span>) &#123;</span><br><span class="line">            sum += num;</span><br><span class="line">            cnt ++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: "</span> &lt;&lt; s &lt;&lt; <span class="string">" is not a legal number"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cnt == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"The average of 0 numbers is Undefined"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cnt == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"The average of 1 number is "</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>, sum);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"The average of "</span> &lt;&lt; cnt &lt;&lt; <span class="string">" numbers is "</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>, sum / cnt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="柳神代码"><a href="#柳神代码" class="headerlink" title="柳神代码"></a>柳神代码</h2><p>格式化输入输出直接秒杀<a href="https://www.liuchuo.net/archives/1924" target="_blank" rel="noopener">https://www.liuchuo.net/archives/1924</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">50</span>], b[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">double</span> temp = <span class="number">0.0</span>, sum = <span class="number">0.0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, a);</span><br><span class="line">        <span class="built_in">sscanf</span>(a, <span class="string">"%lf"</span>, &amp;temp);</span><br><span class="line">        <span class="built_in">sprintf</span>(b, <span class="string">"%.2f"</span>,temp);</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">strlen</span>(a); j++)</span><br><span class="line">            <span class="keyword">if</span>(a[j] != b[j]) flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(flag || temp &lt; <span class="number">-1000</span> || temp &gt; <span class="number">1000</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"ERROR: %s is not a legal number\n"</span>, a);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sum += temp;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt == <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"The average of 1 number is %.2f"</span>, sum);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(cnt &gt; <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"The average of %d numbers is %.2f"</span>, cnt, sum / cnt);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"The average of 0 numbers is Undefined"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1033-To-Fill-or-Not-to-Fill"><a href="#1033-To-Fill-or-Not-to-Fill" class="headerlink" title="1033 To Fill or Not to Fill"></a>1033 To Fill or Not to Fill</h1><h2 id="第一次提交-4"><a href="#第一次提交-4" class="headerlink" title="第一次提交"></a>第一次提交</h2><p>dfs失败</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Cmax, D, Davg, n;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">gs</span> &#123;</span></span><br><span class="line">    <span class="keyword">double</span> price;</span><br><span class="line">    <span class="keyword">int</span> dis;</span><br><span class="line">&#125;;</span><br><span class="line">gs stations[<span class="number">505</span>];</span><br><span class="line"><span class="built_in">set</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; path;</span><br><span class="line"><span class="keyword">int</span> maxAns = <span class="number">0</span>, maxDis;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(gs &amp;g1, gs &amp;g2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (g1.dis != g2.dis) <span class="keyword">return</span> g1.dis &lt; g2.dis;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> g1.price &lt; g2.price;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> idx, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p)</span> </span>&#123;</span><br><span class="line">    maxAns = <span class="built_in">max</span>(pos, maxAns);</span><br><span class="line">    <span class="keyword">if</span> (stations[idx].dis &gt; pos) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (pos &gt;= D) &#123;</span><br><span class="line">        path.insert(p);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> minPrice = <span class="number">1e9</span>, curPrice = stations[idx].price;</span><br><span class="line">    <span class="keyword">int</span> minidx = <span class="number">-1</span>, farestidx = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = idx + <span class="number">1</span>; i &lt; n &amp;&amp; stations[i].dis - stations[idx].dis &lt;= maxDis; ++i) &#123;</span><br><span class="line">        <span class="comment">// 从当前加油站向后看，找下一个不超过最大可达距离的加油站</span></span><br><span class="line">        <span class="keyword">if</span> (stations[i].dis == stations[i - <span class="number">1</span>].dis) <span class="keyword">continue</span>; <span class="comment">// 通过排序算法，我们已经将同一位置的加油站进行了price降序，自然不用关注后续的price</span></span><br><span class="line">        <span class="keyword">if</span> (stations[i].price &lt; minPrice) &#123;</span><br><span class="line">            minPrice = stations[i].price;</span><br><span class="line">            minidx = i;</span><br><span class="line">            p.push_back(i);</span><br><span class="line">            dfs(stations[i].dis, i, p);</span><br><span class="line">            p.pop_back();</span><br><span class="line">        &#125; </span><br><span class="line">        farestidx = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (minidx == <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pos + maxDis &gt;= D) </span><br><span class="line">            dfs(pos + maxDis, idx + <span class="number">1</span>, p);</span><br><span class="line">        <span class="keyword">else</span> maxAns = <span class="built_in">max</span>(maxAns, pos + maxDis);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; Cmax &gt;&gt; D &gt;&gt; Davg &gt;&gt; n;</span><br><span class="line">    maxDis = Cmax * Davg;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf %d"</span>, &amp;stations[i].price, &amp;stations[i].dis);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(stations, stations + n, cmp);</span><br><span class="line">    <span class="keyword">if</span> (stations[<span class="number">0</span>].dis &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"The maximum travel distance = 0.00\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 先dfs判断是否有可行解</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pp = &#123;<span class="number">0</span>&#125;; <span class="comment">// 存储加油的下标</span></span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">0</span>, pp);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = path.<span class="built_in">begin</span>(); it != path.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">        <span class="keyword">auto</span> p = *it ;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; p.<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; p[j] &lt;&lt; <span class="string">" "</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (path.<span class="built_in">size</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"The maximum travel distance = %d.00\n"</span>, maxAns);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 遍历所有path可行解找到price最小的</span></span><br><span class="line">        <span class="keyword">double</span> minPrice = <span class="number">1e9</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = path.<span class="built_in">begin</span>(); it != path.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">            <span class="keyword">auto</span> p = *it;</span><br><span class="line">            <span class="keyword">double</span> curPrice = <span class="number">0</span>, tmp;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; p.<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">                <span class="keyword">int</span> idx = p[j], last = p[j - <span class="number">1</span>];</span><br><span class="line">                </span><br><span class="line">                tmp = <span class="number">1.0</span> * (stations[idx].dis - stations[last].dis) * stations[last].price / Davg;</span><br><span class="line">                curPrice += tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            tmp = <span class="number">1.0</span> * (D - stations[p.back()].dis) * stations[p.back()].price / Davg;</span><br><span class="line">            curPrice += tmp;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (curPrice &lt; minPrice) minPrice = curPrice;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.2lf"</span>, minPrice);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="第二次提交-3"><a href="#第二次提交-3" class="headerlink" title="第二次提交"></a>第二次提交</h2><p>贪心</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> Cmax, D, Davg;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">gs</span> &#123;</span></span><br><span class="line">    <span class="keyword">double</span> price, dis;</span><br><span class="line">&#125;;</span><br><span class="line">gs stations[<span class="number">505</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(gs &amp;g1, gs &amp;g2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (g1.dis != g2.dis) <span class="keyword">return</span> g1.dis &lt; g2.dis;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> g1.price &lt; g2.price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; Cmax &gt;&gt; D &gt;&gt; Davg &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">"%lf %lf"</span>, &amp;stations[i].price, &amp;stations[i].dis);</span><br><span class="line">    gs tmp; tmp.dis = D; tmp.price = <span class="number">0</span>; <span class="comment">// 将终点加入</span></span><br><span class="line">    stations[n ++] = tmp;</span><br><span class="line">    sort(stations, stations + n, cmp);</span><br><span class="line">    <span class="keyword">if</span> (stations[<span class="number">0</span>].dis &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"The maximum travel distance = 0.00\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 贪心算法</span></span><br><span class="line">    <span class="keyword">double</span> curdis = <span class="number">0</span>, curprice = stations[<span class="number">0</span>].price, totalPrice = <span class="number">0</span>, curgas = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (curdis &lt; D) &#123;</span><br><span class="line">        <span class="keyword">double</span> maxdis = curdis + Cmax * Davg; <span class="comment">// 从当前距离能够到达的最远距离</span></span><br><span class="line">        <span class="keyword">bool</span> hadCheaper = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">double</span> minPrice = <span class="number">1e9</span>, minPriceDis = curdis;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; stations[i].dis &lt;= maxdis; ++i) &#123;</span><br><span class="line">            <span class="comment">// 遍历能够到达的最远距离内的所有站点</span></span><br><span class="line">            <span class="keyword">if</span> (stations[i].dis &lt;= curdis) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (stations[i].price &lt; curprice) &#123;</span><br><span class="line">                <span class="comment">// 如果存在比当前更便宜的站点，加上正好到达的油</span></span><br><span class="line">                hadCheaper = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">double</span> gascost = (stations[i].dis - curdis) / Davg; <span class="comment">// 正好到达所需的油量</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (curgas &gt; gascost) &#123;</span><br><span class="line">                    curgas -= gascost;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    totalPrice += (gascost - curgas) * curprice;</span><br><span class="line">                    curgas = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                curprice = stations[i].price;</span><br><span class="line">                curdis = stations[i].dis;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (minPrice &gt; stations[i].price) &#123;</span><br><span class="line">                minPrice = stations[i].price;</span><br><span class="line">                minPriceDis = stations[i].dis;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!hadCheaper &amp;&amp; minPrice != <span class="number">1e9</span>) &#123;</span><br><span class="line">            <span class="comment">// 不存在更便宜的可选择，将当前油量加"满"</span></span><br><span class="line">            <span class="keyword">if</span> (maxdis &lt;= D) &#123;</span><br><span class="line">                <span class="comment">// 完全加满，且下一站停车的位置是minPriceDis</span></span><br><span class="line">                <span class="keyword">double</span> gascost = (minPriceDis - curdis) / Davg;</span><br><span class="line">                totalPrice += curprice * (Cmax - curgas);</span><br><span class="line">                curdis = minPriceDis;  <span class="comment">// 重要的一步, 将油加满后，下一个停下的点应该是后续可达距离内的最小price位置</span></span><br><span class="line">                curgas = Cmax - gascost;</span><br><span class="line">                curprice = minPrice;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 加到足以冲过终点</span></span><br><span class="line">                totalPrice += (maxdis - curdis) * curprice / Davg;</span><br><span class="line">                curdis = D;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!hadCheaper &amp;&amp; minPrice == <span class="number">1e9</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"The maximum travel distance = %.2lf\n"</span>, maxdis);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>, totalPrice);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1017-Queueing-at-Bank"><a href="#1017-Queueing-at-Bank" class="headerlink" title="1017 Queueing at Bank"></a>1017 Queueing at Bank</h1><h2 id="前n次提交"><a href="#前n次提交" class="headerlink" title="前n次提交"></a>前n次提交</h2><p>最后一个样例过不了</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NODE</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> hh, mm, ss, pc;</span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">NODE p[<span class="number">10005</span>];</span><br><span class="line"><span class="keyword">int</span> processTime[<span class="number">10005</span>]; <span class="comment">// 各个人的当前processTime，以秒为单位</span></span><br><span class="line"><span class="keyword">int</span> us[<span class="number">105</span>]; <span class="comment">// 第i个窗户正在被用户us[i]使用，-1表示空闲</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(NODE &amp;n1, NODE &amp;n2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n1.T &lt; n2.T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a, b, c;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">T2t</span><span class="params">(<span class="keyword">int</span> T)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 将秒数转换为时分秒</span></span><br><span class="line">    a = T / <span class="number">3600</span>;</span><br><span class="line">    b = (T - a * <span class="number">3600</span>) / <span class="number">60</span>;</span><br><span class="line">    c = T - a * <span class="number">3600</span> - b * <span class="number">60</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">int</span> cnt = n;  <span class="comment">// 到达时间合法的用户数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d %d"</span>, &amp;p[i].hh, &amp;p[i].mm, &amp;p[i].ss, &amp;p[i].pc);</span><br><span class="line">        p[i].pc = <span class="built_in">min</span>(<span class="number">60</span>, p[i].pc); <span class="comment">// 题目中写到窗口最多处理一位顾客60分钟</span></span><br><span class="line">        p[i].T = p[i].hh * <span class="number">3600</span> + p[i].mm * <span class="number">60</span> + p[i].ss;</span><br><span class="line">        <span class="keyword">if</span> (p[i].T &gt; <span class="number">17</span> * <span class="number">3600</span>) cnt --; <span class="comment">// 到达时间太晚</span></span><br><span class="line">    &#125;</span><br><span class="line">    sort(p, p + n, cmp); <span class="comment">// 按时间进行排序</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) us[i] = <span class="number">-1</span>; <span class="comment">// 初始化us</span></span><br><span class="line">    <span class="keyword">int</span> time = p[<span class="number">0</span>].T; <span class="comment">// 从最早到达的人的到达时间开始向后计算</span></span><br><span class="line">    <span class="keyword">int</span> maxTime = <span class="number">17</span> * <span class="number">3600</span>;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q; <span class="comment">// 黄线等待队列</span></span><br><span class="line">    <span class="keyword">double</span> full_wait = <span class="number">0</span>; <span class="comment">// 总体等待时间(秒)</span></span><br><span class="line">    <span class="keyword">int</span> nex = <span class="number">0</span>; <span class="comment">// 下一个即将到来的人的索引</span></span><br><span class="line">    <span class="comment">// 模拟</span></span><br><span class="line">    <span class="keyword">while</span> (time &lt;= maxTime) &#123;</span><br><span class="line">        T2t(time);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = nex; i &lt; cnt; ++i) &#123;</span><br><span class="line">            <span class="comment">// 枚举每个人</span></span><br><span class="line">            <span class="keyword">if</span> (p[i].T &gt; time) <span class="keyword">break</span>; <span class="comment">// 包括该人的之后的人都还没到</span></span><br><span class="line">            <span class="keyword">if</span> (time == p[i].T) &#123;</span><br><span class="line">                q.push(i); <span class="comment">// time刚好是arrive的时间，push到队列中</span></span><br><span class="line">                nex = i + <span class="number">1</span>;</span><br><span class="line"><span class="comment">//                 printf("%02d:%02d:%02d，%d到达并开始等待，队列人数为%d\n", p[i].hh, p[i].mm, p[i].ss, i, q.size());</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (time &gt;= <span class="number">8</span> * <span class="number">3600</span>) &#123;</span><br><span class="line">            <span class="comment">// 银行开始营业</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> wd = <span class="number">0</span>; wd &lt; k; ++wd) &#123;</span><br><span class="line">                <span class="comment">// 遍历所有的窗口</span></span><br><span class="line">                <span class="keyword">if</span> (us[wd] == <span class="number">-1</span>) &#123;</span><br><span class="line">                    <span class="comment">// 窗口空闲，开始处理队首</span></span><br><span class="line">                    <span class="keyword">if</span> (!q.empty()) &#123;</span><br><span class="line">                        <span class="keyword">int</span> tmp = q.front();</span><br><span class="line">                        q.pop();</span><br><span class="line">                        us[wd] = tmp;</span><br><span class="line"><span class="comment">//                         printf("%02d:%02d:%02d，%d去窗口%d处理业务\n", a, b, c, tmp, wd);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; </span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (us[wd] != <span class="number">-1</span>) &#123;</span><br><span class="line">                    processTime[us[wd]] ++; <span class="comment">// 窗口正在处理，更新被处理人的处理时间+1秒</span></span><br><span class="line">                    <span class="keyword">if</span> (processTime[us[wd]] == p[us[wd]].pc * <span class="number">60</span>) &#123;</span><br><span class="line">                        <span class="comment">// 经过这分钟后，该人处理完毕，更新窗口状态</span></span><br><span class="line"><span class="comment">//                         printf("%02d:%02d:%02d，%d结束业务离开，用时%d分钟\n", a, b, c, us[wd], p[us[wd]].pc);</span></span><br><span class="line">                        us[wd] = <span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        full_wait += q.<span class="built_in">size</span>(); <span class="comment">// 总等待时间累加上该秒在黄线外的人数</span></span><br><span class="line"><span class="comment">//         if (q.size()) printf("%02d:%02d:%02d，有%d人等待\n", a, b, c, q.size());</span></span><br><span class="line">        </span><br><span class="line">        time ++; <span class="comment">// 时间+1秒</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cnt == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"0.0\n"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%.1lf\n"</span>, full_wait / (<span class="number">60.0</span> * cnt));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最后一次提交"><a href="#最后一次提交" class="headerlink" title="最后一次提交"></a>最后一次提交</h2><p>终于理解了题意..</p>
<p><em>Anyone arrives early will have to wait in line till 08:00, and anyone comes too late (at or after 17:00:01) will not be served nor counted into the average.</em></p>
<p>换句话说，只要你是17点前到的，银行累死加班到第二天也会给你处理完的…，我以为17点后仍有17点前开始但未处理完的业务才会继续处理，剩下的排队的都应该回家（这不是才应该符合现实情况吗！）</p>
<p>改动：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟条件增加一个队列非空</span></span><br><span class="line"><span class="keyword">while</span> (time &lt;= maxTime || !q.empty())</span><br></pre></td></tr></table></figure>

<h2 id="更优答案"><a href="#更优答案" class="headerlink" title="更优答案"></a>更优答案</h2><p><a href="https://www.liuchuo.net/archives/2945" target="_blank" rel="noopener">https://www.liuchuo.net/archives/2945</a></p>
<p>完全不用用queue来模拟队列，随着先来后到的原则，只要将结构体数组进行排序后，顺序访问就相当于按队列顺序处理。对每个顾客当轮到他进窗口时，只需关注窗口当前将会第一个处理完业务的人的时间即可，这个第一个处理完的优先性用优先队列进行维护。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxTime 17 * 3600</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> minTime 8 * 3600</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">1e4</span> + <span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">INF</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> cT, pT; <span class="comment">// 到达时间和处理时间</span></span><br><span class="line">&#125;;</span><br><span class="line">INF arr[maxN];</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> a, b, c, d;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d %d\n"</span>, &amp;a, &amp;b, &amp;c, &amp;d);</span><br><span class="line">        <span class="keyword">int</span> t = a * <span class="number">3600</span> + b * <span class="number">60</span> + c;</span><br><span class="line">        <span class="keyword">if</span> (t &gt; maxTime) <span class="keyword">continue</span>;</span><br><span class="line">        arr[++ cnt].cT = t;</span><br><span class="line">        arr[cnt].pT = d * <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    sort(arr + <span class="number">1</span>, arr + <span class="number">1</span> + cnt, [](INF &amp;i1, INF &amp;i2)&#123;<span class="keyword">return</span> i1.cT &lt; i2.cT;&#125;);</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt; &gt; q; <span class="comment">// 按照处理结束时间从小到大排序</span></span><br><span class="line">    <span class="comment">// 初始化优先队列</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) q.push(minTime);</span><br><span class="line">    <span class="keyword">double</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; ++i) &#123;</span><br><span class="line">        <span class="comment">// 按时间顺序遍历每一个到达银行的人</span></span><br><span class="line">        <span class="keyword">if</span> (q.top() &lt;= arr[i].cT) &#123;</span><br><span class="line">            <span class="comment">// 若存在窗口空闲（处理结束的时间在当前人来的时间的过去）</span></span><br><span class="line">            q.push(arr[i].cT + arr[i].pT);</span><br><span class="line">            q.pop();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 若不存在窗口空闲，则计算等待时间</span></span><br><span class="line">            total += (q.top() - arr[i].cT);</span><br><span class="line">            q.push(q.top() + arr[i].pT);</span><br><span class="line">            q.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!cnt) <span class="built_in">printf</span>(<span class="string">"0.0\n"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%.1lf\n"</span>, total / (<span class="number">60.0</span> * cnt));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1026-Table-Tennis"><a href="#1026-Table-Tennis" class="headerlink" title="1026 Table Tennis"></a>1026 Table Tennis</h1><h2 id="优先队列"><a href="#优先队列" class="headerlink" title="优先队列"></a>优先队列</h2><p>失败</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PII pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> minTime 8 * 3600</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxTime 21 * 3600</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, cnt = <span class="number">0</span>, k, m;</span><br><span class="line"><span class="keyword">int</span> hh, mm, ss, pT, tag;</span><br><span class="line"><span class="keyword">int</span> vip[<span class="number">105</span>], table_num[<span class="number">105</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">person</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> cT, pT, T, hh, mm, ss;</span><br><span class="line">    <span class="keyword">bool</span> isvip;</span><br><span class="line">    <span class="keyword">int</span> table;</span><br><span class="line">&#125;;</span><br><span class="line">person p[maxN];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(person &amp;p1, person &amp;p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p1.cT &lt; p2.cT;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(person &amp;p1, person &amp;p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p1.T &lt; p2.T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a, b, c;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">T2t</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    a = t / <span class="number">3600</span>;</span><br><span class="line">    b = (t - a * <span class="number">3600</span>) / <span class="number">60</span>;</span><br><span class="line">    c = t - a * <span class="number">3600</span> - b * <span class="number">60</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d %d %d"</span>, &amp;hh, &amp;mm, &amp;ss, &amp;pT, &amp;tag);</span><br><span class="line">        <span class="keyword">int</span> tmp = hh * <span class="number">3600</span> + mm * <span class="number">60</span> + ss;</span><br><span class="line">        <span class="keyword">if</span> (tmp &gt; maxTime) <span class="keyword">continue</span>;</span><br><span class="line">        p[++ cnt].cT = tmp;</span><br><span class="line">        p[cnt].pT = <span class="built_in">min</span>(<span class="number">120</span> * <span class="number">60</span>, pT * <span class="number">60</span>);</span><br><span class="line">        p[cnt].hh = hh; p[cnt].mm = mm; p[cnt].ss = ss;</span><br><span class="line">        p[cnt].isvip = (tag == <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(p + <span class="number">1</span>, p + cnt + <span class="number">1</span>, cmp); <span class="comment">// 按先来后到排序</span></span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; qp, qpvip, qall;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p[i].isvip) qpvip.push(i);</span><br><span class="line">        <span class="keyword">else</span> qp.push(i);</span><br><span class="line">        </span><br><span class="line">        qall.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k &gt;&gt; m;</span><br><span class="line">    priority_queue&lt;PII, <span class="built_in">vector</span>&lt;PII&gt;, greater&lt;PII&gt; &gt; q, qvip;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;tag);</span><br><span class="line">        vip[tag] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (vip[i]) &#123;</span><br><span class="line">            qvip.push(make_pair(minTime, i));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            q.push(make_pair(minTime, i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!qall.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> t, idx, i;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="literal">false</span>; <span class="comment">// true：vip桌子被使用</span></span><br><span class="line">        <span class="keyword">bool</span> case1 = q.top().first &lt;= p[qall.front()].cT &amp;&amp; qvip.top().first &lt;= p[qall.front()].cT; <span class="comment">// 情况一，两种桌子在顾客到达时均可以选(应选择索引小的)</span></span><br><span class="line">        <span class="keyword">if</span> ((!case1 &amp;&amp; q.top().first &gt; qvip.top().first) || (case1 &amp;&amp; q.top().second &gt; qvip.top().second)) &#123;</span><br><span class="line">            <span class="comment">// 如果vip/普通桌都可以选且索引小的恰好是vip桌 或 vip桌就应该下一个被选</span></span><br><span class="line"><span class="comment">//             printf("VIP索引更小, %d %d\n",p[qpvip.front()].cT, qvip.top().first);</span></span><br><span class="line">            t = qvip.top().first, idx = qvip.top().second;</span><br><span class="line">            <span class="keyword">if</span> (!qpvip.empty() &amp;&amp; (p[qpvip.front()].cT &lt;= qvip.top().first || qall.front() == qpvip.front())) &#123;</span><br><span class="line">                <span class="comment">// 如果在空出的时间点qvip.top().first之前有VIP在排队了，那么为该VIP服务</span></span><br><span class="line">                i = qpvip.front();</span><br><span class="line">                qpvip.pop();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 否则为普通人进行服务</span></span><br><span class="line">                i = qp.front();</span><br><span class="line">                qp.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            t = q.top().first, idx = q.top().second;</span><br><span class="line">            <span class="comment">// 对于普通桌，服务的永远是当前队列第一人</span></span><br><span class="line">            <span class="keyword">if</span> (qpvip.empty() || qall.front() == qp.front()) &#123;</span><br><span class="line">                <span class="comment">// 队列第一人是普通人</span></span><br><span class="line">                i = qp.front();</span><br><span class="line">                qp.pop();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 队列第一人是VIP</span></span><br><span class="line">                i = qpvip.front();</span><br><span class="line">                qpvip.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        p[i].T = <span class="built_in">max</span>(p[i].cT, t); <span class="comment">// 顾客开始玩的时间应该是max(来的时间，有空闲桌的时间)</span></span><br><span class="line">        p[i].table = idx;</span><br><span class="line">        T2t(p[i].T);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"桌子%d在%02d:%02d:%02d点被%02d:%02d:%02d号二货使用\n"</span>, idx, a, b, c, p[i].hh, p[i].mm, p[i].ss);</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            qvip.push(make_pair(p[i].T + p[i].pT, idx));</span><br><span class="line">            qvip.pop();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            q.push(make_pair(p[i].T + p[i].pT, idx));</span><br><span class="line">            q.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        qall.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    sort(p + <span class="number">1</span>, p + <span class="number">1</span> + cnt, cmp2); <span class="comment">// 按servingtime排序</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p[i].T &gt; maxTime) <span class="keyword">continue</span>;</span><br><span class="line">        T2t(p[i].T);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d %02d:%02d:%02d %d\n"</span>, p[i].hh, p[i].mm, p[i].ss, a, b, c, (<span class="keyword">int</span>)(<span class="number">1.0</span> * (p[i].T - p[i].cT) / (<span class="number">60.0</span>) + <span class="number">0.5</span>));</span><br><span class="line">        table_num[p[i].table] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d%s"</span>, table_num[i], i == k ? <span class="string">"\n"</span> : <span class="string">" "</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="纯模拟"><a href="#纯模拟" class="headerlink" title="纯模拟"></a>纯模拟</h2><p>AC</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> minTime 8 * 3600</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxTime 21 * 3600</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxN = <span class="number">1e5</span> + <span class="number">15</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">person</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> cT, pT, T = <span class="number">1e9</span>, hh, mm, ss;</span><br><span class="line">    <span class="keyword">bool</span> isvip;</span><br><span class="line">    <span class="keyword">int</span> table;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n, cnt = <span class="number">0</span>, k, m, tt;</span><br><span class="line"><span class="keyword">int</span> hh, mm, ss, pT, tag;</span><br><span class="line"><span class="keyword">int</span> vip[<span class="number">105</span>], table_num[<span class="number">105</span>], windows[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> processed_time[maxN];</span><br><span class="line">person p[maxN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(person &amp;p1, person &amp;p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p1.cT &lt; p2.cT;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(person &amp;p1, person &amp;p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p1.T &lt; p2.T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a, b, c;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">T2t</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    a = t / <span class="number">3600</span>;</span><br><span class="line">    b = (t - a * <span class="number">3600</span>) / <span class="number">60</span>;</span><br><span class="line">    c = t - a * <span class="number">3600</span> - b * <span class="number">60</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d %d %d"</span>, &amp;hh, &amp;mm, &amp;ss, &amp;pT, &amp;tag);</span><br><span class="line">        <span class="keyword">int</span> tmp = hh * <span class="number">3600</span> + mm * <span class="number">60</span> + ss;</span><br><span class="line">        <span class="keyword">if</span> (tmp &gt; maxTime) <span class="keyword">continue</span>;</span><br><span class="line">        p[++ cnt].cT = tmp;</span><br><span class="line">        p[cnt].pT = <span class="built_in">min</span>(<span class="number">120</span> * <span class="number">60</span>, pT * <span class="number">60</span>);</span><br><span class="line">        p[cnt].hh = hh; p[cnt].mm = mm; p[cnt].ss = ss;</span><br><span class="line">        p[cnt].isvip = (tag == <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(p + <span class="number">1</span>, p + cnt + <span class="number">1</span>, cmp1); <span class="comment">// 按先来后到排序</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k &gt;&gt; m;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;tt);</span><br><span class="line">        vip[tt] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> time = minTime, nex = <span class="number">1</span>, processed_num = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; qvip, qp; <span class="comment">// 索引队列</span></span><br><span class="line">    <span class="keyword">while</span> (time &lt; maxTime &amp;&amp; processed_num &lt;= cnt) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = nex; i &lt;= cnt; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (time == p[i].cT) &#123;</span><br><span class="line">                <span class="keyword">if</span> (p[i].isvip) qvip.push(i);</span><br><span class="line">                <span class="keyword">else</span> qp.push(i);</span><br><span class="line">                nex = i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 按索引顺序从小到大遍历窗口</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 第一遍遍历 完成纯为了保证vip优先的权益</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> wd = <span class="number">1</span>; wd &lt;= k; ++wd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (qvip.empty()) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (windows[wd] == <span class="number">0</span> &amp;&amp; vip[wd]) &#123;</span><br><span class="line">                <span class="comment">// 较小索引的vip桌子空闲且队列中</span></span><br><span class="line">                windows[wd] = qvip.front();</span><br><span class="line">                p[qvip.front()].T = time;</span><br><span class="line">                p[qvip.front()].table = wd;</span><br><span class="line">                table_num[wd] ++;</span><br><span class="line">                qvip.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 第二遍遍历，vip和普通用户一视同仁</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> wd = <span class="number">1</span>; wd &lt;= k; ++wd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (windows[wd] == <span class="number">0</span> &amp;&amp; qp.<span class="built_in">size</span>() + qvip.<span class="built_in">size</span>() != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 选择队列中靠前的</span></span><br><span class="line">                <span class="keyword">if</span> (!qvip.empty() &amp;&amp; (qp.<span class="built_in">size</span>() == <span class="number">0</span> || p[qp.front()].cT &gt; p[qvip.front()].cT)) &#123;</span><br><span class="line">                    windows[wd] = qvip.front();</span><br><span class="line">                    p[qvip.front()].T = time;</span><br><span class="line">                    p[qvip.front()].table = wd;</span><br><span class="line">                    table_num[wd] ++;</span><br><span class="line">                    qvip.pop();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    windows[wd] = qp.front();</span><br><span class="line">                    p[qp.front()].T = time;</span><br><span class="line">                    p[qp.front()].table = wd;</span><br><span class="line">                    table_num[wd] ++;</span><br><span class="line">                    qp.pop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (windows[wd] != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> user = windows[wd];</span><br><span class="line">                processed_time[user] ++;</span><br><span class="line">                <span class="keyword">if</span> (processed_time[user] == p[user].pT) &#123;</span><br><span class="line">                    processed_num ++; <span class="comment">// 处理完一组</span></span><br><span class="line">                    windows[wd] = <span class="number">0</span>; <span class="comment">// 桌子变空闲</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        time ++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    sort(p + <span class="number">1</span>, p + <span class="number">1</span> + cnt, cmp2); <span class="comment">// 按servingtime排序</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p[i].T &gt;= maxTime) <span class="keyword">break</span>; <span class="comment">// serving time 太大，不输出</span></span><br><span class="line">        T2t(p[i].T);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d %02d:%02d:%02d %.0lf\n"</span>, p[i].hh, p[i].mm, p[i].ss, a, b, c, round(<span class="number">1.0</span> * (p[i].T - p[i].cT) / <span class="number">60.0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d%s"</span>, table_num[i], i == k ? <span class="string">"\n"</span> : <span class="string">" "</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1088-Rational-Arithmetic"><a href="#1088-Rational-Arithmetic" class="headerlink" title="1088 Rational Arithmetic"></a>1088 Rational Arithmetic</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="built_in">string</span> f1, f2, tmp;</span><br><span class="line"><span class="function">LL <span class="title">gcd</span><span class="params">(LL a, LL b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b ? gcd(b, a % b) : a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">i2s</span><span class="params">(LL t)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 注意处理负数情况</span></span><br><span class="line">    t = <span class="built_in">abs</span>(t);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line">    <span class="keyword">while</span> (t != <span class="number">0</span>) &#123;</span><br><span class="line">        v.push_back(t % <span class="number">10</span>); </span><br><span class="line">        t /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">string</span> ret = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = v.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; -- i) &#123;</span><br><span class="line">        ret.push_back(v[i] + <span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">dcd</span><span class="params">(LL a, LL b)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// parsing a / b</span></span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"Inf"</span>;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">    <span class="keyword">bool</span> pos = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">string</span> ans = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">if</span> (a &gt; <span class="number">0</span> &amp;&amp; b &gt; <span class="number">0</span> || a &lt; <span class="number">0</span> &amp;&amp; b &lt; <span class="number">0</span>) pos = <span class="literal">true</span>;</span><br><span class="line">    a = <span class="built_in">abs</span>(a);</span><br><span class="line">    b = <span class="built_in">abs</span>(b);</span><br><span class="line">    <span class="keyword">if</span> (pos == <span class="literal">false</span>) ans = <span class="string">"(-"</span>;</span><br><span class="line">    <span class="keyword">if</span> (a % b == <span class="number">0</span>) ans += i2s(a / b);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a / b != <span class="number">0</span>) &#123;</span><br><span class="line">        ans += (i2s(a / b) + (dcd(a % b, b) == <span class="string">"0"</span> ? <span class="string">""</span> : <span class="string">" "</span> + dcd(a % b, b)));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ans += (i2s(a) + <span class="string">"/"</span> + i2s(b));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pos == <span class="literal">false</span>) ans.push_back(<span class="string">')'</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">simplize</span><span class="params">(LL &amp;a, LL &amp;b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> g = gcd(a, b);</span><br><span class="line">    a /= g; </span><br><span class="line">    b /= g;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">(LL a, LL b, <span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f1 &lt;&lt; <span class="string">" "</span> &lt;&lt; c &lt;&lt; <span class="string">" "</span> &lt;&lt; f2 &lt;&lt; <span class="string">" = "</span>;</span><br><span class="line"><span class="comment">//     cout &lt;&lt; a &lt;&lt; " " &lt;&lt; b &lt;&lt; endl;</span></span><br><span class="line">    simplize(a, b);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; dcd(a, b) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    LL a1, b1, a2, b2;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld/%lld %lld/%lld"</span>, &amp;a1, &amp;b1, &amp;a2, &amp;b2);</span><br><span class="line">    simplize(a1, b1);</span><br><span class="line">    simplize(a2, b2);</span><br><span class="line">    f1 = dcd(a1, b1);</span><br><span class="line">    f2 = dcd(a2, b2);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">process</span>(a1 * b2 + a2 * b1, b1 * b2, <span class="string">'+'</span>);</span><br><span class="line">    <span class="built_in">process</span>(a1 * b2 - a2 * b1, b1 * b2, <span class="string">'-'</span>);</span><br><span class="line">    <span class="built_in">process</span>(a1 * a2, b1 * b2, <span class="string">'*'</span>);</span><br><span class="line">    <span class="built_in">process</span>(a1 * b2, b1 * a2, <span class="string">'/'</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/C/" rel="tag"># C++</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/07/05/7%E6%9C%88%E5%AD%A6%E4%B9%A0/" rel="prev" title="7月学习">
      <i class="fa fa-chevron-left"></i> 7月学习
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/08/14/CCF%E5%88%B7%E9%A2%98/" rel="next" title="CCF刷题">
      CCF刷题 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1056-Mice-and-Rice"><span class="nav-number">1.</span> <span class="nav-text">1056 Mice and Rice</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题目大意"><span class="nav-number">1.1.</span> <span class="nav-text">题目大意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一次提交"><span class="nav-number">1.2.</span> <span class="nav-text">第一次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二次提交"><span class="nav-number">1.3.</span> <span class="nav-text">第二次提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1057-Stack"><span class="nav-number">2.</span> <span class="nav-text">1057 Stack</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题目大意-1"><span class="nav-number">2.1.</span> <span class="nav-text">题目大意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#树状数组"><span class="nav-number">2.2.</span> <span class="nav-text">树状数组</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1059-Prime-Factors"><span class="nav-number">3.</span> <span class="nav-text">1059 Prime Factors</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题目大意-2"><span class="nav-number">3.1.</span> <span class="nav-text">题目大意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构建质数表"><span class="nav-number">3.2.</span> <span class="nav-text">构建质数表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1075-PAT-Judge"><span class="nav-number">4.</span> <span class="nav-text">1075 PAT Judge</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一次提交-1"><span class="nav-number">4.1.</span> <span class="nav-text">第一次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二次提交-1"><span class="nav-number">4.2.</span> <span class="nav-text">第二次提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1080-Graduate-Admission"><span class="nav-number">5.</span> <span class="nav-text">1080 Graduate Admission</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一次提交-2"><span class="nav-number">5.1.</span> <span class="nav-text">第一次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二次提交-2"><span class="nav-number">5.2.</span> <span class="nav-text">第二次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第三次提交"><span class="nav-number">5.3.</span> <span class="nav-text">第三次提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1030-Travel-Plan"><span class="nav-number">6.</span> <span class="nav-text">1030 Travel Plan</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DFS"><span class="nav-number">6.1.</span> <span class="nav-text">DFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dijkstra"><span class="nav-number">6.2.</span> <span class="nav-text">Dijkstra</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1095-Cars-on-Campus"><span class="nav-number">7.</span> <span class="nav-text">1095 Cars on Campus</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一次提交-3"><span class="nav-number">7.1.</span> <span class="nav-text">第一次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考题解"><span class="nav-number">7.2.</span> <span class="nav-text">参考题解</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1097-Deduplication-on-a-Linked-List"><span class="nav-number">8.</span> <span class="nav-text">1097 Deduplication on a Linked List</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1098-Insertion-or-Heap-Sort"><span class="nav-number">9.</span> <span class="nav-text">1098 Insertion or Heap Sort</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1003-Emergency"><span class="nav-number">10.</span> <span class="nav-text">1003 Emergency</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DFS-1"><span class="nav-number">10.1.</span> <span class="nav-text">DFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dijkstra-DFS"><span class="nav-number">10.2.</span> <span class="nav-text">Dijkstra+DFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dijkstra双标尺"><span class="nav-number">10.3.</span> <span class="nav-text">Dijkstra双标尺</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1131-Subway-Map"><span class="nav-number">11.</span> <span class="nav-text">1131 Subway Map</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1007-Maximum-Subsequence-Sum"><span class="nav-number">12.</span> <span class="nav-text">1007 Maximum Subsequence Sum</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#前缀和"><span class="nav-number">12.1.</span> <span class="nav-text">前缀和</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#贪心"><span class="nav-number">12.2.</span> <span class="nav-text">贪心</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1060-Are-They-Equal"><span class="nav-number">13.</span> <span class="nav-text">1060 Are They Equal</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1061-Date"><span class="nav-number">14.</span> <span class="nav-text">1061 Date</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#问题1：cout的”观察者效应“-g"><span class="nav-number">14.1.</span> <span class="nav-text">问题1：cout的”观察者效应“(g++)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实验1：不对两句带”命中”的cout进行注释"><span class="nav-number">14.1.1.</span> <span class="nav-text">实验1：不对两句带”命中”的cout进行注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实验2：对两句带”命中”的cout进行注释"><span class="nav-number">14.1.2.</span> <span class="nav-text">实验2：对两句带”命中”的cout进行注释</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题2：isdigit-‘-amp-’-和’-amp-’-lt-’9’-amp-amp-‘-amp-’-gt-’0’-不一样吗？-g"><span class="nav-number">14.2.</span> <span class="nav-text">问题2：isdigit(‘&amp;’)和’&amp;’&lt;&#x3D;’9’ &amp;&amp; ‘&amp;’ &gt;&#x3D;’0’ 不一样吗？(g++)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实验1：采取isdigit函数，不输出"><span class="nav-number">14.2.1.</span> <span class="nav-text">实验1：采取isdigit函数，不输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实验2：采取a-i-lt-‘9’-amp-amp-a-i-gt-‘0’的策略，不输出"><span class="nav-number">14.2.2.</span> <span class="nav-text">实验2：采取a[i] &lt;&#x3D; ‘9’ &amp;&amp; a[i] &gt;&#x3D; ‘0’的策略，不输出</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题3：未命中却出现更改的奇景-clang"><span class="nav-number">14.3.</span> <span class="nav-text">问题3：未命中却出现更改的奇景(clang++)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题4：a-i-属于-0-9-的判断语句替代isdigit-clang"><span class="nav-number">14.4.</span> <span class="nav-text">问题4：a[i]属于[0-9]的判断语句替代isdigit(clang++)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">14.5.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1073-Scientific-Notation"><span class="nav-number">15.</span> <span class="nav-text">1073 Scientific Notation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1016-Phone-Bills"><span class="nav-number">16.</span> <span class="nav-text">1016 Phone Bills</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1108-Finding-Average"><span class="nav-number">17.</span> <span class="nav-text">1108 Finding Average</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ac代码"><span class="nav-number">17.1.</span> <span class="nav-text">ac代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#柳神代码"><span class="nav-number">17.2.</span> <span class="nav-text">柳神代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1033-To-Fill-or-Not-to-Fill"><span class="nav-number">18.</span> <span class="nav-text">1033 To Fill or Not to Fill</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一次提交-4"><span class="nav-number">18.1.</span> <span class="nav-text">第一次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二次提交-3"><span class="nav-number">18.2.</span> <span class="nav-text">第二次提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1017-Queueing-at-Bank"><span class="nav-number">19.</span> <span class="nav-text">1017 Queueing at Bank</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#前n次提交"><span class="nav-number">19.1.</span> <span class="nav-text">前n次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#最后一次提交"><span class="nav-number">19.2.</span> <span class="nav-text">最后一次提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#更优答案"><span class="nav-number">19.3.</span> <span class="nav-text">更优答案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1026-Table-Tennis"><span class="nav-number">20.</span> <span class="nav-text">1026 Table Tennis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#优先队列"><span class="nav-number">20.1.</span> <span class="nav-text">优先队列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#纯模拟"><span class="nav-number">20.2.</span> <span class="nav-text">纯模拟</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1088-Rational-Arithmetic"><span class="nav-number">21.</span> <span class="nav-text">1088 Rational Arithmetic</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Michael Johnson"
      src="/images/%E7%A8%8B%E5%BA%8F%E7%8C%BF.jpg">
  <p class="site-author-name" itemprop="name">Michael Johnson</p>
  <div class="site-description" itemprop="description">小白的个人网站</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/shmilyiris" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shmilyiris" rel="noopener" target="_blank"><i class="我的github主页 fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Michael Johnson</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

<div class="powered-by">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <i class="fa fa-user-md"></i>
    <span id="busuanzi_container_site_uv">
        本站访客数:<span id="busuanzi_value_site_uv"></span>
    </span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_pv">
        本站访问量<span id="busuanzi_value_site_pv"></span>
    </span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : true,
      appId      : 'llRolgqGW9Ba4yUFTcxq9h8k-gzGzoHsz',
      appKey     : 'VmrmbmRVQov7ocjkzavv3vx2',
      placeholder: "欢迎各位大佬批评指正！",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
